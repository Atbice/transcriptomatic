cat all_files.txt
----- Begin output of all_files.txt -----
----- End output of all_files.txt -----

cat concat_files.sh
----- Begin output of concat_files.sh -----
#!/bin/bash

# Create or clear the output file
> all_files.txt

# Function to process a single file
process_file() {
    local file="$1"
    
    # Write the command to the output file
    echo "cat $file" >> all_files.txt
    echo "----- Begin output of $file -----" >> all_files.txt
    
    # Check if it's a .env file
    if [[ "$file" == *.env ]]; then
        # Process .env file line by line and replace values after =
        while IFS='=' read -r key value; do
            # Skip empty lines or comments
            [[ -z "$key" || "$key" =~ ^# ]] && continue
            # Output the key with placeholder
            echo "${key}=place holder for value" >> all_files.txt
        done < "$file"
    else
        # For non-.env files, just cat the contents
        cat "$file" >> all_files.txt
    fi
    
    # Add separator after file content
    echo "----- End output of $file -----" >> all_files.txt
    echo "" >> all_files.txt
}

# Process all files including hidden ones and subdirectories
find . -type f -print0 | while IFS= read -r -d '' file; do
    # Remove leading ./ from the filename
    file="${file#./}"
    process_file "$file"
done

echo "Contents of all files (including hidden files and subdirectories) have been saved to all_files.txt"----- End output of concat_files.sh -----

cat frontend/Dockerfile
----- Begin output of frontend/Dockerfile -----
# Build stage
FROM node:20-alpine as build

WORKDIR /app

# Copy package files and install dependencies
COPY package.json package-lock.json* ./
RUN npm ci

# Copy all frontend files and build
COPY . .
RUN npm run build

# Production stage
FROM nginx:alpine

# Copy built files from build stage to nginx serve directory
COPY --from=build /app/dist /usr/share/nginx/html

# Copy custom nginx config
COPY nginx.conf /etc/nginx/conf.d/default.conf

# Expose port 80
EXPOSE 80

# Start nginx
CMD ["nginx", "-g", "daemon off;"]----- End output of frontend/Dockerfile -----

cat frontend/index.html
----- Begin output of frontend/index.html -----
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Audio Transcription App</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/index.jsx"></script>
  </body>
</html>----- End output of frontend/index.html -----

cat frontend/package.json
----- Begin output of frontend/package.json -----
{
  "name": "audio-transcription-frontend",
  "version": "0.1.0",
  "private": true,
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "axios": "^1.6.7"
  },
  "devDependencies": {
    "@vitejs/plugin-react": "^4.2.1",
    "vite": "^5.1.4"
  },
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "browserslist": {
    "production": [
      ">0.2%",
      "not dead",
      "not op_mini all"
    ],
    "development": [
      "last 1 chrome version",
      "last 1 firefox version",
      "last 1 safari version"
    ]
  }
}----- End output of frontend/package.json -----

cat frontend/vite.config.js
----- Begin output of frontend/vite.config.js -----
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig(({ command, mode }) => {
  const config = {
    plugins: [react()],
    server: {
      port: 3000,
      hmr: {
        overlay: true,
      },
      proxy: {
        '/api': {
          target: 'http://backend:8000',
          changeOrigin: true,
          rewrite: (path) => path.replace(/^\/api/, ''),
        },
      },
    },
    build: {
      outDir: 'dist', // Output stays at /app/dist/
      assetsDir: 'assets',
    },
  };

  if (command === 'build') {
    const homeLabUrl = 'http://192.168.1.111:80';
    config.define = {
      'process.env.API_BASE_URL': JSON.stringify(`${homeLabUrl}/api`),
    };
  }

  return config;
});----- End output of frontend/vite.config.js -----

cat frontend/package-lock.json
----- Begin output of frontend/package-lock.json -----
{
  "name": "audio-transcription-frontend",
  "version": "0.1.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "audio-transcription-frontend",
      "version": "0.1.0",
      "dependencies": {
        "axios": "^1.6.7",
        "react": "^18.2.0",
        "react-dom": "^18.2.0"
      },
      "devDependencies": {
        "@vitejs/plugin-react": "^4.2.1",
        "vite": "^5.1.4"
      }
    },
    "node_modules/@ampproject/remapping": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/@ampproject/remapping/-/remapping-2.3.0.tgz",
      "integrity": "sha512-30iZtAPgz+LTIYoeivqYo853f02jBYSd5uGnGpkFV0M3xOt9aN73erkgYAmZU43x4VfqcnLxW9Kpg3R5LC4YYw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.5",
        "@jridgewell/trace-mapping": "^0.3.24"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/code-frame": {
      "version": "7.26.2",
      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.26.2.tgz",
      "integrity": "sha512-RJlIHRueQgwWitWgF8OdFYGZX328Ax5BCemNGlqHfplnRT9ESi8JkFlvaVYbS+UubVY6dpv87Fs2u5M29iNFVQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-validator-identifier": "^7.25.9",
        "js-tokens": "^4.0.0",
        "picocolors": "^1.0.0"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/compat-data": {
      "version": "7.26.8",
      "resolved": "https://registry.npmjs.org/@babel/compat-data/-/compat-data-7.26.8.tgz",
      "integrity": "sha512-oH5UPLMWR3L2wEFLnFJ1TZXqHufiTKAiLfqw5zkhS4dKXLJ10yVztfil/twG8EDTA4F/tvVNw9nOl4ZMslB8rQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/core": {
      "version": "7.26.10",
      "resolved": "https://registry.npmjs.org/@babel/core/-/core-7.26.10.tgz",
      "integrity": "sha512-vMqyb7XCDMPvJFFOaT9kxtiRh42GwlZEg1/uIgtZshS5a/8OaduUfCi7kynKgc3Tw/6Uo2D+db9qBttghhmxwQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@ampproject/remapping": "^2.2.0",
        "@babel/code-frame": "^7.26.2",
        "@babel/generator": "^7.26.10",
        "@babel/helper-compilation-targets": "^7.26.5",
        "@babel/helper-module-transforms": "^7.26.0",
        "@babel/helpers": "^7.26.10",
        "@babel/parser": "^7.26.10",
        "@babel/template": "^7.26.9",
        "@babel/traverse": "^7.26.10",
        "@babel/types": "^7.26.10",
        "convert-source-map": "^2.0.0",
        "debug": "^4.1.0",
        "gensync": "^1.0.0-beta.2",
        "json5": "^2.2.3",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/babel"
      }
    },
    "node_modules/@babel/generator": {
      "version": "7.26.10",
      "resolved": "https://registry.npmjs.org/@babel/generator/-/generator-7.26.10.tgz",
      "integrity": "sha512-rRHT8siFIXQrAYOYqZQVsAr8vJ+cBNqcVAY6m5V8/4QqzaPl+zDBe6cLEPRDuNOUf3ww8RfJVlOyQMoSI+5Ang==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.26.10",
        "@babel/types": "^7.26.10",
        "@jridgewell/gen-mapping": "^0.3.5",
        "@jridgewell/trace-mapping": "^0.3.25",
        "jsesc": "^3.0.2"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets": {
      "version": "7.26.5",
      "resolved": "https://registry.npmjs.org/@babel/helper-compilation-targets/-/helper-compilation-targets-7.26.5.tgz",
      "integrity": "sha512-IXuyn5EkouFJscIDuFF5EsiSolseme1s0CZB+QxVugqJLYmKdxI1VfIBOst0SUu4rnk2Z7kqTwmoO1lp3HIfnA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/compat-data": "^7.26.5",
        "@babel/helper-validator-option": "^7.25.9",
        "browserslist": "^4.24.0",
        "lru-cache": "^5.1.1",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-imports": {
      "version": "7.25.9",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-imports/-/helper-module-imports-7.25.9.tgz",
      "integrity": "sha512-tnUA4RsrmflIM6W6RFTLFSXITtl0wKjgpnLgXyowocVPrbYrLUXSBXDgTs8BlbmIzIdlBySRQjINYs2BAkiLtw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/traverse": "^7.25.9",
        "@babel/types": "^7.25.9"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-transforms": {
      "version": "7.26.0",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-transforms/-/helper-module-transforms-7.26.0.tgz",
      "integrity": "sha512-xO+xu6B5K2czEnQye6BHA7DolFFmS3LB7stHZFaOLb1pAwO1HWLS8fXA+eh0A2yIvltPVmx3eNNDBJA2SLHXFw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.25.9",
        "@babel/helper-validator-identifier": "^7.25.9",
        "@babel/traverse": "^7.25.9"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-plugin-utils": {
      "version": "7.26.5",
      "resolved": "https://registry.npmjs.org/@babel/helper-plugin-utils/-/helper-plugin-utils-7.26.5.tgz",
      "integrity": "sha512-RS+jZcRdZdRFzMyr+wcsaqOmld1/EqTghfaBGQQd/WnRdzdlvSZ//kF7U8VQTxf1ynZ4cjUcYgjVGx13ewNPMg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-string-parser": {
      "version": "7.25.9",
      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.25.9.tgz",
      "integrity": "sha512-4A/SCr/2KLd5jrtOMFzaKjVtAei3+2r/NChoBNoZ3EyP/+GlhoaEGoWOZUmFmoITP7zOJyHIMm+DYRd8o3PvHA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-identifier": {
      "version": "7.25.9",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.25.9.tgz",
      "integrity": "sha512-Ed61U6XJc3CVRfkERJWDz4dJwKe7iLmmJsbOGu9wSloNSFttHV0I8g6UAgb7qnK5ly5bGLPd4oXZlxCdANBOWQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-option": {
      "version": "7.25.9",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-option/-/helper-validator-option-7.25.9.tgz",
      "integrity": "sha512-e/zv1co8pp55dNdEcCynfj9X7nyUKUXoUEwfXqaZt0omVOmDe9oOTdKStH4GmAw6zxMFs50ZayuMfHDKlO7Tfw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helpers": {
      "version": "7.26.10",
      "resolved": "https://registry.npmjs.org/@babel/helpers/-/helpers-7.26.10.tgz",
      "integrity": "sha512-UPYc3SauzZ3JGgj87GgZ89JVdC5dj0AoetR5Bw6wj4niittNyFh6+eOGonYvJ1ao6B8lEa3Q3klS7ADZ53bc5g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.26.9",
        "@babel/types": "^7.26.10"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/parser": {
      "version": "7.26.10",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.26.10.tgz",
      "integrity": "sha512-6aQR2zGE/QFi8JpDLjUZEPYOs7+mhKXm86VaKFiLP35JQwQb6bwUE+XbvkH0EptsYhbNBSUGaUBLKqxH1xSgsA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.26.10"
      },
      "bin": {
        "parser": "bin/babel-parser.js"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-self": {
      "version": "7.25.9",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-self/-/plugin-transform-react-jsx-self-7.25.9.tgz",
      "integrity": "sha512-y8quW6p0WHkEhmErnfe58r7x0A70uKphQm8Sp8cV7tjNQwK56sNVK0M73LK3WuYmsuyrftut4xAkjjgU0twaMg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.25.9"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-source": {
      "version": "7.25.9",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-source/-/plugin-transform-react-jsx-source-7.25.9.tgz",
      "integrity": "sha512-+iqjT8xmXhhYv4/uiYd8FNQsraMFZIfxVSqxxVSZP0WbbSAWvBXAul0m/zu+7Vv4O/3WtApy9pmaTMiumEZgfg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.25.9"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/template": {
      "version": "7.26.9",
      "resolved": "https://registry.npmjs.org/@babel/template/-/template-7.26.9.tgz",
      "integrity": "sha512-qyRplbeIpNZhmzOysF/wFMuP9sctmh2cFzRAZOn1YapxBsE1i9bJIY586R/WBLfLcmcBlM8ROBiQURnnNy+zfA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.26.2",
        "@babel/parser": "^7.26.9",
        "@babel/types": "^7.26.9"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/traverse": {
      "version": "7.26.10",
      "resolved": "https://registry.npmjs.org/@babel/traverse/-/traverse-7.26.10.tgz",
      "integrity": "sha512-k8NuDrxr0WrPH5Aupqb2LCVURP/S0vBEn5mK6iH+GIYob66U5EtoZvcdudR2jQ4cmTwhEwW1DLB+Yyas9zjF6A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.26.2",
        "@babel/generator": "^7.26.10",
        "@babel/parser": "^7.26.10",
        "@babel/template": "^7.26.9",
        "@babel/types": "^7.26.10",
        "debug": "^4.3.1",
        "globals": "^11.1.0"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/types": {
      "version": "7.26.10",
      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.26.10.tgz",
      "integrity": "sha512-emqcG3vHrpxUKTrxcblR36dcrcoRDvKmnL/dCL6ZsHaShW80qxCAcNhzQZrpeM765VzEos+xOi4s+r4IXzTwdQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-string-parser": "^7.25.9",
        "@babel/helper-validator-identifier": "^7.25.9"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@esbuild/aix-ppc64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.21.5.tgz",
      "integrity": "sha512-1SDgH6ZSPTlggy1yI6+Dbkiz8xzpHJEVAlF/AM1tHPLsf5STom9rwtjE4hKAF20FfXXNTFqEYXyJNWh1GiZedQ==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "aix"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/android-arm": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.21.5.tgz",
      "integrity": "sha512-vCPvzSjpPHEi1siZdlvAlsPxXl7WbOVUBBAowWug4rJHb68Ox8KualB+1ocNvT5fjv6wpkX6o/iEpbDrf68zcg==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/android-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.21.5.tgz",
      "integrity": "sha512-c0uX9VAUBQ7dTDCjq+wdyGLowMdtR/GoC2U5IYk/7D1H1JYC0qseD7+11iMP2mRLN9RcCMRcjC4YMclCzGwS/A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/android-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.21.5.tgz",
      "integrity": "sha512-D7aPRUUNHRBwHxzxRvp856rjUHRFW1SdQATKXH2hqA0kAZb1hKmi02OpYRacl0TxIGz/ZmXWlbZgjwWYaCakTA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/darwin-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.21.5.tgz",
      "integrity": "sha512-DwqXqZyuk5AiWWf3UfLiRDJ5EDd49zg6O9wclZ7kUMv2WRFr4HKjXp/5t8JZ11QbQfUS6/cRCKGwYhtNAY88kQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/darwin-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.21.5.tgz",
      "integrity": "sha512-se/JjF8NlmKVG4kNIuyWMV/22ZaerB+qaSi5MdrXtd6R08kvs2qCN4C09miupktDitvh8jRFflwGFBQcxZRjbw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/freebsd-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.21.5.tgz",
      "integrity": "sha512-5JcRxxRDUJLX8JXp/wcBCy3pENnCgBR9bN6JsY4OmhfUtIHe3ZW0mawA7+RDAcMLrMIZaf03NlQiX9DGyB8h4g==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/freebsd-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.21.5.tgz",
      "integrity": "sha512-J95kNBj1zkbMXtHVH29bBriQygMXqoVQOQYA+ISs0/2l3T9/kj42ow2mpqerRBxDJnmkUDCaQT/dfNXWX/ZZCQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-arm": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.21.5.tgz",
      "integrity": "sha512-bPb5AHZtbeNGjCKVZ9UGqGwo8EUu4cLq68E95A53KlxAPRmUyYv2D6F0uUI65XisGOL1hBP5mTronbgo+0bFcA==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.21.5.tgz",
      "integrity": "sha512-ibKvmyYzKsBeX8d8I7MH/TMfWDXBF3db4qM6sy+7re0YXya+K1cem3on9XgdT2EQGMu4hQyZhan7TeQ8XkGp4Q==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-ia32": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.21.5.tgz",
      "integrity": "sha512-YvjXDqLRqPDl2dvRODYmmhz4rPeVKYvppfGYKSNGdyZkA01046pLWyRKKI3ax8fbJoK5QbxblURkwK/MWY18Tg==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-loong64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.21.5.tgz",
      "integrity": "sha512-uHf1BmMG8qEvzdrzAqg2SIG/02+4/DHB6a9Kbya0XDvwDEKCoC8ZRWI5JJvNdUjtciBGFQ5PuBlpEOXQj+JQSg==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-mips64el": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.21.5.tgz",
      "integrity": "sha512-IajOmO+KJK23bj52dFSNCMsz1QP1DqM6cwLUv3W1QwyxkyIWecfafnI555fvSGqEKwjMXVLokcV5ygHW5b3Jbg==",
      "cpu": [
        "mips64el"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-ppc64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.21.5.tgz",
      "integrity": "sha512-1hHV/Z4OEfMwpLO8rp7CvlhBDnjsC3CttJXIhBi+5Aj5r+MBvy4egg7wCbe//hSsT+RvDAG7s81tAvpL2XAE4w==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-riscv64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.21.5.tgz",
      "integrity": "sha512-2HdXDMd9GMgTGrPWnJzP2ALSokE/0O5HhTUvWIbD3YdjME8JwvSCnNGBnTThKGEB91OZhzrJ4qIIxk/SBmyDDA==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-s390x": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.21.5.tgz",
      "integrity": "sha512-zus5sxzqBJD3eXxwvjN1yQkRepANgxE9lgOW2qLnmr8ikMTphkjgXu1HR01K4FJg8h1kEEDAqDcZQtbrRnB41A==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.21.5.tgz",
      "integrity": "sha512-1rYdTpyv03iycF1+BhzrzQJCdOuAOtaqHTWJZCWvijKD2N5Xu0TtVC8/+1faWqcP9iBCWOmjmhoH94dH82BxPQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/netbsd-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.21.5.tgz",
      "integrity": "sha512-Woi2MXzXjMULccIwMnLciyZH4nCIMpWQAs049KEeMvOcNADVxo0UBIQPfSmxB3CWKedngg7sWZdLvLczpe0tLg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/openbsd-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.21.5.tgz",
      "integrity": "sha512-HLNNw99xsvx12lFBUwoT8EVCsSvRNDVxNpjZ7bPn947b8gJPzeHWyNVhFsaerc0n3TsbOINvRP2byTZ5LKezow==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/sunos-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.21.5.tgz",
      "integrity": "sha512-6+gjmFpfy0BHU5Tpptkuh8+uw3mnrvgs+dSPQXQOv3ekbordwnzTVEb4qnIvQcYXq6gzkyTnoZ9dZG+D4garKg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "sunos"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/win32-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.21.5.tgz",
      "integrity": "sha512-Z0gOTd75VvXqyq7nsl93zwahcTROgqvuAcYDUr+vOv8uHhNSKROyU961kgtCD1e95IqPKSQKH7tBTslnS3tA8A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/win32-ia32": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.21.5.tgz",
      "integrity": "sha512-SWXFF1CL2RVNMaVs+BBClwtfZSvDgtL//G/smwAc5oVK/UPu2Gu9tIaRgFmYFFKrmg3SyAjSrElf0TiJ1v8fYA==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/win32-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.21.5.tgz",
      "integrity": "sha512-tQd/1efJuzPC6rCFwEvLtci/xNFcTZknmXs98FYDfGE4wP9ClFV98nyKrzJKVPMhdDnjzLhdUyMX4PsQAPjwIw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@jridgewell/gen-mapping": {
      "version": "0.3.8",
      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.8.tgz",
      "integrity": "sha512-imAbBGkb+ebQyxKgzv5Hu2nmROxoDOXHh80evxdoXNOrvAnVx7zimzc1Oo5h9RlfV4vPXaE2iM5pOFbvOCClWA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/set-array": "^1.2.1",
        "@jridgewell/sourcemap-codec": "^1.4.10",
        "@jridgewell/trace-mapping": "^0.3.24"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/resolve-uri": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/set-array": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/@jridgewell/set-array/-/set-array-1.2.1.tgz",
      "integrity": "sha512-R8gLRTZeyp03ymzP/6Lil/28tGeGEzhx1q2k703KGWRAI1VdvPIXdG70VJc2pAMw3NA6JKL5hhFu1sJX0Mnn/A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.0",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.0.tgz",
      "integrity": "sha512-gv3ZRaISU3fjPAgNsriBRqGWQL6quFx04YMPW/zD8XMLsU32mhCCbfbO6KZFLjvYpCZ8zyDEgqsgf+PwPaM7GQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.25",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.25.tgz",
      "integrity": "sha512-vNk6aEwybGtawWmy/PzwnGDOjCkLWSD2wqvjGGAgOAwCGWySYXfYoxt00IJkTF+8Lb57DwOb3Aa0o9CApepiYQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.1.0",
        "@jridgewell/sourcemap-codec": "^1.4.14"
      }
    },
    "node_modules/@rollup/rollup-android-arm-eabi": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm-eabi/-/rollup-android-arm-eabi-4.37.0.tgz",
      "integrity": "sha512-l7StVw6WAa8l3vA1ov80jyetOAEo1FtHvZDbzXDO/02Sq/QVvqlHkYoFwDJPIMj0GKiistsBudfx5tGFnwYWDQ==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-android-arm64": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm64/-/rollup-android-arm64-4.37.0.tgz",
      "integrity": "sha512-6U3SlVyMxezt8Y+/iEBcbp945uZjJwjZimu76xoG7tO1av9VO691z8PkhzQ85ith2I8R2RddEPeSfcbyPfD4hA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-darwin-arm64": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-arm64/-/rollup-darwin-arm64-4.37.0.tgz",
      "integrity": "sha512-+iTQ5YHuGmPt10NTzEyMPbayiNTcOZDWsbxZYR1ZnmLnZxG17ivrPSWFO9j6GalY0+gV3Jtwrrs12DBscxnlYA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-darwin-x64": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-x64/-/rollup-darwin-x64-4.37.0.tgz",
      "integrity": "sha512-m8W2UbxLDcmRKVjgl5J/k4B8d7qX2EcJve3Sut7YGrQoPtCIQGPH5AMzuFvYRWZi0FVS0zEY4c8uttPfX6bwYQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-arm64": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-arm64/-/rollup-freebsd-arm64-4.37.0.tgz",
      "integrity": "sha512-FOMXGmH15OmtQWEt174v9P1JqqhlgYge/bUjIbiVD1nI1NeJ30HYT9SJlZMqdo1uQFyt9cz748F1BHghWaDnVA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-x64": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-x64/-/rollup-freebsd-x64-4.37.0.tgz",
      "integrity": "sha512-SZMxNttjPKvV14Hjck5t70xS3l63sbVwl98g3FlVVx2YIDmfUIy29jQrsw06ewEYQ8lQSuY9mpAPlmgRD2iSsA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-gnueabihf": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-gnueabihf/-/rollup-linux-arm-gnueabihf-4.37.0.tgz",
      "integrity": "sha512-hhAALKJPidCwZcj+g+iN+38SIOkhK2a9bqtJR+EtyxrKKSt1ynCBeqrQy31z0oWU6thRZzdx53hVgEbRkuI19w==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-musleabihf": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-musleabihf/-/rollup-linux-arm-musleabihf-4.37.0.tgz",
      "integrity": "sha512-jUb/kmn/Gd8epbHKEqkRAxq5c2EwRt0DqhSGWjPFxLeFvldFdHQs/n8lQ9x85oAeVb6bHcS8irhTJX2FCOd8Ag==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-gnu": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-gnu/-/rollup-linux-arm64-gnu-4.37.0.tgz",
      "integrity": "sha512-oNrJxcQT9IcbcmKlkF+Yz2tmOxZgG9D9GRq+1OE6XCQwCVwxixYAa38Z8qqPzQvzt1FCfmrHX03E0pWoXm1DqA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-musl": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-musl/-/rollup-linux-arm64-musl-4.37.0.tgz",
      "integrity": "sha512-pfxLBMls+28Ey2enpX3JvjEjaJMBX5XlPCZNGxj4kdJyHduPBXtxYeb8alo0a7bqOoWZW2uKynhHxF/MWoHaGQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-loongarch64-gnu": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-loongarch64-gnu/-/rollup-linux-loongarch64-gnu-4.37.0.tgz",
      "integrity": "sha512-yCE0NnutTC/7IGUq/PUHmoeZbIwq3KRh02e9SfFh7Vmc1Z7atuJRYWhRME5fKgT8aS20mwi1RyChA23qSyRGpA==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-powerpc64le-gnu": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-powerpc64le-gnu/-/rollup-linux-powerpc64le-gnu-4.37.0.tgz",
      "integrity": "sha512-NxcICptHk06E2Lh3a4Pu+2PEdZ6ahNHuK7o6Np9zcWkrBMuv21j10SQDJW3C9Yf/A/P7cutWoC/DptNLVsZ0VQ==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-gnu": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-gnu/-/rollup-linux-riscv64-gnu-4.37.0.tgz",
      "integrity": "sha512-PpWwHMPCVpFZLTfLq7EWJWvrmEuLdGn1GMYcm5MV7PaRgwCEYJAwiN94uBuZev0/J/hFIIJCsYw4nLmXA9J7Pw==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-musl": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-musl/-/rollup-linux-riscv64-musl-4.37.0.tgz",
      "integrity": "sha512-DTNwl6a3CfhGTAOYZ4KtYbdS8b+275LSLqJVJIrPa5/JuIufWWZ/QFvkxp52gpmguN95eujrM68ZG+zVxa8zHA==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-s390x-gnu": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-s390x-gnu/-/rollup-linux-s390x-gnu-4.37.0.tgz",
      "integrity": "sha512-hZDDU5fgWvDdHFuExN1gBOhCuzo/8TMpidfOR+1cPZJflcEzXdCy1LjnklQdW8/Et9sryOPJAKAQRw8Jq7Tg+A==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-gnu": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-gnu/-/rollup-linux-x64-gnu-4.37.0.tgz",
      "integrity": "sha512-pKivGpgJM5g8dwj0ywBwe/HeVAUSuVVJhUTa/URXjxvoyTT/AxsLTAbkHkDHG7qQxLoW2s3apEIl26uUe08LVQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-musl": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-musl/-/rollup-linux-x64-musl-4.37.0.tgz",
      "integrity": "sha512-E2lPrLKE8sQbY/2bEkVTGDEk4/49UYRVWgj90MY8yPjpnGBQ+Xi1Qnr7b7UIWw1NOggdFQFOLZ8+5CzCiz143w==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-win32-arm64-msvc": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-arm64-msvc/-/rollup-win32-arm64-msvc-4.37.0.tgz",
      "integrity": "sha512-Jm7biMazjNzTU4PrQtr7VS8ibeys9Pn29/1bm4ph7CP2kf21950LgN+BaE2mJ1QujnvOc6p54eWWiVvn05SOBg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-ia32-msvc": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-ia32-msvc/-/rollup-win32-ia32-msvc-4.37.0.tgz",
      "integrity": "sha512-e3/1SFm1OjefWICB2Ucstg2dxYDkDTZGDYgwufcbsxTHyqQps1UQf33dFEChBNmeSsTOyrjw2JJq0zbG5GF6RA==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-msvc": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-msvc/-/rollup-win32-x64-msvc-4.37.0.tgz",
      "integrity": "sha512-LWbXUBwn/bcLx2sSsqy7pK5o+Nr+VCoRoAohfJ5C/aBio9nfJmGQqHAhU6pwxV/RmyTk5AqdySma7uwWGlmeuA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@types/babel__core": {
      "version": "7.20.5",
      "resolved": "https://registry.npmjs.org/@types/babel__core/-/babel__core-7.20.5.tgz",
      "integrity": "sha512-qoQprZvz5wQFJwMDqeseRXWv3rqMvhgpbXFfVyWhbx9X47POIA6i/+dXefEmZKoAgOaTdaIgNSMqMIU61yRyzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.20.7",
        "@babel/types": "^7.20.7",
        "@types/babel__generator": "*",
        "@types/babel__template": "*",
        "@types/babel__traverse": "*"
      }
    },
    "node_modules/@types/babel__generator": {
      "version": "7.6.8",
      "resolved": "https://registry.npmjs.org/@types/babel__generator/-/babel__generator-7.6.8.tgz",
      "integrity": "sha512-ASsj+tpEDsEiFr1arWrlN6V3mdfjRMZt6LtK/Vp/kreFLnr5QH5+DhvD5nINYZXzwJvXeGq+05iUXcAzVrqWtw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__template": {
      "version": "7.4.4",
      "resolved": "https://registry.npmjs.org/@types/babel__template/-/babel__template-7.4.4.tgz",
      "integrity": "sha512-h/NUaSyG5EyxBIp8YRxo4RMe2/qQgvyowRwVMzhYhBCONbW8PUsg4lkFMrhgZhUe5z3L3MiLDuvyJ/CaPa2A8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.1.0",
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__traverse": {
      "version": "7.20.6",
      "resolved": "https://registry.npmjs.org/@types/babel__traverse/-/babel__traverse-7.20.6.tgz",
      "integrity": "sha512-r1bzfrm0tomOI8g1SzvCaQHo6Lcv6zu0EA+W2kHrt8dyrHQxGzBBL4kdkzIS+jBMV+EYcMAEAqXqYaLJq5rOZg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.20.7"
      }
    },
    "node_modules/@types/estree": {
      "version": "1.0.6",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.6.tgz",
      "integrity": "sha512-AYnb1nQyY49te+VRAVgmzfcgjYS91mY5P0TKUDCLEM+gNnA+3T6rWITXRLYCpahpqSQbN5cE+gHpnPyXjHWxcw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@vitejs/plugin-react": {
      "version": "4.3.4",
      "resolved": "https://registry.npmjs.org/@vitejs/plugin-react/-/plugin-react-4.3.4.tgz",
      "integrity": "sha512-SCCPBJtYLdE8PX/7ZQAs1QAZ8Jqwih+0VBLum1EGqmCCQal+MIUqLCzj3ZUy8ufbC0cAM4LRlSTm7IQJwWT4ug==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.26.0",
        "@babel/plugin-transform-react-jsx-self": "^7.25.9",
        "@babel/plugin-transform-react-jsx-source": "^7.25.9",
        "@types/babel__core": "^7.20.5",
        "react-refresh": "^0.14.2"
      },
      "engines": {
        "node": "^14.18.0 || >=16.0.0"
      },
      "peerDependencies": {
        "vite": "^4.2.0 || ^5.0.0 || ^6.0.0"
      }
    },
    "node_modules/asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==",
      "license": "MIT"
    },
    "node_modules/axios": {
      "version": "1.8.4",
      "resolved": "https://registry.npmjs.org/axios/-/axios-1.8.4.tgz",
      "integrity": "sha512-eBSYY4Y68NNlHbHBMdeDmKNtDgXWhQsJcGqzO3iLUM0GraQFSS9cVgPX5I9b3lbdFKyYoAEGAZF1DwhTaljNAw==",
      "license": "MIT",
      "dependencies": {
        "follow-redirects": "^1.15.6",
        "form-data": "^4.0.0",
        "proxy-from-env": "^1.1.0"
      }
    },
    "node_modules/browserslist": {
      "version": "4.24.4",
      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.24.4.tgz",
      "integrity": "sha512-KDi1Ny1gSePi1vm0q4oxSF8b4DR44GF4BbmS2YdhPLOEqd8pDviZOGH/GsmRwoWJ2+5Lr085X7naowMwKHDG1A==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "caniuse-lite": "^1.0.30001688",
        "electron-to-chromium": "^1.5.73",
        "node-releases": "^2.0.19",
        "update-browserslist-db": "^1.1.1"
      },
      "bin": {
        "browserslist": "cli.js"
      },
      "engines": {
        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/caniuse-lite": {
      "version": "1.0.30001707",
      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001707.tgz",
      "integrity": "sha512-3qtRjw/HQSMlDWf+X79N206fepf4SOOU6SQLMaq/0KkZLmSjPxAkBOQQ+FxbHKfHmYLZFfdWsO3KA90ceHPSnw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "CC-BY-4.0"
    },
    "node_modules/combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "license": "MIT",
      "dependencies": {
        "delayed-stream": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/convert-source-map": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-2.0.0.tgz",
      "integrity": "sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/debug": {
      "version": "4.4.0",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.0.tgz",
      "integrity": "sha512-6WTZ/IxCY/T6BALoZHaE4ctp9xm+Z5kY/pzYaCHRFeyVhojxlrm+46y68HA6hr0TcwEssoxNiDEUJQjfPZ/RYA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/electron-to-chromium": {
      "version": "1.5.123",
      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.123.tgz",
      "integrity": "sha512-refir3NlutEZqlKaBLK0tzlVLe5P2wDKS7UQt/3SpibizgsRAPOsqQC3ffw1nlv3ze5gjRQZYHoPymgVZkplFA==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/esbuild": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.21.5.tgz",
      "integrity": "sha512-mg3OPMV4hXywwpoDxu3Qda5xCKQi+vCTZq8S9J/EpkhB2HzKXq4SNFZE3+NK93JYxc8VMSep+lOUSC/RVKaBqw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "bin": {
        "esbuild": "bin/esbuild"
      },
      "engines": {
        "node": ">=12"
      },
      "optionalDependencies": {
        "@esbuild/aix-ppc64": "0.21.5",
        "@esbuild/android-arm": "0.21.5",
        "@esbuild/android-arm64": "0.21.5",
        "@esbuild/android-x64": "0.21.5",
        "@esbuild/darwin-arm64": "0.21.5",
        "@esbuild/darwin-x64": "0.21.5",
        "@esbuild/freebsd-arm64": "0.21.5",
        "@esbuild/freebsd-x64": "0.21.5",
        "@esbuild/linux-arm": "0.21.5",
        "@esbuild/linux-arm64": "0.21.5",
        "@esbuild/linux-ia32": "0.21.5",
        "@esbuild/linux-loong64": "0.21.5",
        "@esbuild/linux-mips64el": "0.21.5",
        "@esbuild/linux-ppc64": "0.21.5",
        "@esbuild/linux-riscv64": "0.21.5",
        "@esbuild/linux-s390x": "0.21.5",
        "@esbuild/linux-x64": "0.21.5",
        "@esbuild/netbsd-x64": "0.21.5",
        "@esbuild/openbsd-x64": "0.21.5",
        "@esbuild/sunos-x64": "0.21.5",
        "@esbuild/win32-arm64": "0.21.5",
        "@esbuild/win32-ia32": "0.21.5",
        "@esbuild/win32-x64": "0.21.5"
      }
    },
    "node_modules/escalade": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/follow-redirects": {
      "version": "1.15.9",
      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.15.9.tgz",
      "integrity": "sha512-gew4GsXizNgdoRyqmyfMHyAmXsZDk6mHkSxZFCzW9gwlbtOW44CDtYavM+y+72qD/Vq2l550kMF52DT8fOLJqQ==",
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/RubenVerborgh"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=4.0"
      },
      "peerDependenciesMeta": {
        "debug": {
          "optional": true
        }
      }
    },
    "node_modules/form-data": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.2.tgz",
      "integrity": "sha512-hGfm/slu0ZabnNt4oaRZ6uREyfCj6P4fT/n6A1rGV+Z0VdGXjfOhVUpkn6qVQONHGIFwmveGXyDs75+nr6FM8w==",
      "license": "MIT",
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "es-set-tostringtag": "^2.1.0",
        "mime-types": "^2.1.12"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/gensync": {
      "version": "1.0.0-beta.2",
      "resolved": "https://registry.npmjs.org/gensync/-/gensync-1.0.0-beta.2.tgz",
      "integrity": "sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/globals": {
      "version": "11.12.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-11.12.0.tgz",
      "integrity": "sha512-WOBp/EEGUiIsJSp7wcv/y6MO+lV9UoncWqxuFfm8eBwzWNgyfBd6Gz+IeKQ9jCmyhoH99g15M3T+QaVHFjizVA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "license": "MIT",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/js-tokens": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
      "license": "MIT"
    },
    "node_modules/jsesc": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/jsesc/-/jsesc-3.1.0.tgz",
      "integrity": "sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jsesc": "bin/jsesc"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/json5": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
      "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "json5": "lib/cli.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/loose-envify": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/loose-envify/-/loose-envify-1.4.0.tgz",
      "integrity": "sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==",
      "license": "MIT",
      "dependencies": {
        "js-tokens": "^3.0.0 || ^4.0.0"
      },
      "bin": {
        "loose-envify": "cli.js"
      }
    },
    "node_modules/lru-cache": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
      "integrity": "sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "yallist": "^3.0.2"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/mime-db": {
      "version": "1.52.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.35",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
      "license": "MIT",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/nanoid": {
      "version": "3.3.11",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
      "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "bin": {
        "nanoid": "bin/nanoid.cjs"
      },
      "engines": {
        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
      }
    },
    "node_modules/node-releases": {
      "version": "2.0.19",
      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.19.tgz",
      "integrity": "sha512-xxOWJsBKtzAq7DY0J+DTzuz58K8e7sJbdgwkbMWQe8UYB6ekmsQ45q0M/tJDsGaZmbC+l7n57UV8Hl5tHxO9uw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/postcss": {
      "version": "8.5.3",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.3.tgz",
      "integrity": "sha512-dle9A3yYxlBSrt8Fu+IpjGT8SY8hN0mlaA6GY8t0P5PjIOZemULz/E2Bnm/2dcUOena75OTNkHI76uZBNUUq3A==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.8",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/proxy-from-env": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/proxy-from-env/-/proxy-from-env-1.1.0.tgz",
      "integrity": "sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==",
      "license": "MIT"
    },
    "node_modules/react": {
      "version": "18.3.1",
      "resolved": "https://registry.npmjs.org/react/-/react-18.3.1.tgz",
      "integrity": "sha512-wS+hAgJShR0KhEvPJArfuPVN1+Hz1t0Y6n5jLrGQbkb4urgPE/0Rve+1kMB1v/oWgHgm4WIcV+i7F2pTVj+2iQ==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-dom": {
      "version": "18.3.1",
      "resolved": "https://registry.npmjs.org/react-dom/-/react-dom-18.3.1.tgz",
      "integrity": "sha512-5m4nQKp+rZRb09LNH59GM4BxTh9251/ylbKIbpe7TpGxfJ+9kv6BLkLBXIjjspbgbnIBNqlI23tRnTWT0snUIw==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0",
        "scheduler": "^0.23.2"
      },
      "peerDependencies": {
        "react": "^18.3.1"
      }
    },
    "node_modules/react-refresh": {
      "version": "0.14.2",
      "resolved": "https://registry.npmjs.org/react-refresh/-/react-refresh-0.14.2.tgz",
      "integrity": "sha512-jCvmsr+1IUSMUyzOkRcvnVbX3ZYC6g9TDrDbFuFmRDq7PD4yaGbLKNQL6k2jnArV8hjYxh7hVhAZB6s9HDGpZA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/rollup": {
      "version": "4.37.0",
      "resolved": "https://registry.npmjs.org/rollup/-/rollup-4.37.0.tgz",
      "integrity": "sha512-iAtQy/L4QFU+rTJ1YUjXqJOJzuwEghqWzCEYD2FEghT7Gsy1VdABntrO4CLopA5IkflTyqNiLNwPcOJ3S7UKLg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/estree": "1.0.6"
      },
      "bin": {
        "rollup": "dist/bin/rollup"
      },
      "engines": {
        "node": ">=18.0.0",
        "npm": ">=8.0.0"
      },
      "optionalDependencies": {
        "@rollup/rollup-android-arm-eabi": "4.37.0",
        "@rollup/rollup-android-arm64": "4.37.0",
        "@rollup/rollup-darwin-arm64": "4.37.0",
        "@rollup/rollup-darwin-x64": "4.37.0",
        "@rollup/rollup-freebsd-arm64": "4.37.0",
        "@rollup/rollup-freebsd-x64": "4.37.0",
        "@rollup/rollup-linux-arm-gnueabihf": "4.37.0",
        "@rollup/rollup-linux-arm-musleabihf": "4.37.0",
        "@rollup/rollup-linux-arm64-gnu": "4.37.0",
        "@rollup/rollup-linux-arm64-musl": "4.37.0",
        "@rollup/rollup-linux-loongarch64-gnu": "4.37.0",
        "@rollup/rollup-linux-powerpc64le-gnu": "4.37.0",
        "@rollup/rollup-linux-riscv64-gnu": "4.37.0",
        "@rollup/rollup-linux-riscv64-musl": "4.37.0",
        "@rollup/rollup-linux-s390x-gnu": "4.37.0",
        "@rollup/rollup-linux-x64-gnu": "4.37.0",
        "@rollup/rollup-linux-x64-musl": "4.37.0",
        "@rollup/rollup-win32-arm64-msvc": "4.37.0",
        "@rollup/rollup-win32-ia32-msvc": "4.37.0",
        "@rollup/rollup-win32-x64-msvc": "4.37.0",
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/scheduler": {
      "version": "0.23.2",
      "resolved": "https://registry.npmjs.org/scheduler/-/scheduler-0.23.2.tgz",
      "integrity": "sha512-UOShsPwz7NrMUqhR6t0hWjFduvOzbtv7toDH1/hIrfRNIDBnnBWd0CwJTGvTpngVlmwGCdP9/Zl/tVrDqcuYzQ==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0"
      }
    },
    "node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/source-map-js": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
      "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/update-browserslist-db": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.1.3.tgz",
      "integrity": "sha512-UxhIZQ+QInVdunkDAaiazvvT/+fXL5Osr0JZlJulepYu6Jd7qJtDZjlur0emRlT71EN3ScPoE7gvsuIKKNavKw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "escalade": "^3.2.0",
        "picocolors": "^1.1.1"
      },
      "bin": {
        "update-browserslist-db": "cli.js"
      },
      "peerDependencies": {
        "browserslist": ">= 4.21.0"
      }
    },
    "node_modules/vite": {
      "version": "5.4.15",
      "resolved": "https://registry.npmjs.org/vite/-/vite-5.4.15.tgz",
      "integrity": "sha512-6ANcZRivqL/4WtwPGTKNaosuNJr5tWiftOC7liM7G9+rMb8+oeJeyzymDu4rTN93seySBmbjSfsS3Vzr19KNtA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "esbuild": "^0.21.3",
        "postcss": "^8.4.43",
        "rollup": "^4.20.0"
      },
      "bin": {
        "vite": "bin/vite.js"
      },
      "engines": {
        "node": "^18.0.0 || >=20.0.0"
      },
      "funding": {
        "url": "https://github.com/vitejs/vite?sponsor=1"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.3"
      },
      "peerDependencies": {
        "@types/node": "^18.0.0 || >=20.0.0",
        "less": "*",
        "lightningcss": "^1.21.0",
        "sass": "*",
        "sass-embedded": "*",
        "stylus": "*",
        "sugarss": "*",
        "terser": "^5.4.0"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "less": {
          "optional": true
        },
        "lightningcss": {
          "optional": true
        },
        "sass": {
          "optional": true
        },
        "sass-embedded": {
          "optional": true
        },
        "stylus": {
          "optional": true
        },
        "sugarss": {
          "optional": true
        },
        "terser": {
          "optional": true
        }
      }
    },
    "node_modules/yallist": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-3.1.1.tgz",
      "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
      "dev": true,
      "license": "ISC"
    }
  }
}
----- End output of frontend/package-lock.json -----

cat frontend/src/App.jsx
----- Begin output of frontend/src/App.jsx -----
import React, { useState, useEffect } from 'react';
import AudioRecorder from './components/AudioRecorder';
import AgentOutputs from './components/AgentOutputs';
import ErrorBoundary from './components/ErrorBoundary';
import axios from 'axios';
import './App.css';

function App() {
  const [isSetupComplete, setIsSetupComplete] = useState(false);
  const [meetingId, setMeetingId] = useState(null);
  const [meetings, setMeetings] = useState([]);
  const [meetingTitle, setMeetingTitle] = useState('');
  const [meetingAgenda, setMeetingAgenda] = useState('');
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState(null);
  
  const apiBaseUrl = '/api';

  // Fetch existing meetings when component mounts
  useEffect(() => {
    const fetchMeetings = async () => {
      try {
        const response = await axios.get(`${apiBaseUrl}/meetings`);
        setMeetings(response.data.meetings);
        setIsLoading(false);
      } catch (err) {
        console.error('Error fetching meetings:', err);
        setError('Failed to load meetings. Please try again later.');
        setIsLoading(false);
      }
    };

    fetchMeetings();
  }, [apiBaseUrl]);

  const handleCreateMeeting = async (e) => {
    e.preventDefault();
    
    if (!meetingTitle.trim()) {
      setError('Please enter a meeting title');
      return;
    }
    
    try {
      setIsLoading(true);
      
      // Create a new meeting
      const response = await axios.post(`${apiBaseUrl}/meetings`, {
        title: meetingTitle,
        agenda: meetingAgenda
      });
      
      setMeetingId(response.data.meeting_id);
      setIsSetupComplete(true);
      setIsLoading(false);
      setError(null);
    } catch (err) {
      console.error('Error creating meeting:', err);
      setError('Failed to create meeting. Please try again.');
      setIsLoading(false);
    }
  };

  const handleSelectMeeting = (id) => {
    setMeetingId(id);
    setIsSetupComplete(true);
  };

  return (
    <div className="App widescreen">
      <header className="App-header">
        <h1>Audio Transcription App</h1>
      </header>
      
      {!isSetupComplete ? (
        <div className="meeting-setup">
          <h2>Meeting Setup</h2>
          
          {isLoading ? (
            <div className="loading">Loading...</div>
          ) : (
            <>
              {error && <div className="error-message">{error}</div>}
              
              <form onSubmit={handleCreateMeeting} className="meeting-form">
                <div className="form-group">
                  <label htmlFor="meeting-title">Meeting Title (required)</label>
                  <input
                    id="meeting-title"
                    type="text"
                    value={meetingTitle}
                    onChange={(e) => setMeetingTitle(e.target.value)}
                    placeholder="Enter meeting title"
                    required
                  />
                </div>
                
                <div className="form-group">
                  <label htmlFor="meeting-agenda">Meeting Agenda (optional)</label>
                  <textarea
                    id="meeting-agenda"
                    value={meetingAgenda}
                    onChange={(e) => setMeetingAgenda(e.target.value)}
                    placeholder="Enter meeting agenda"
                    rows={4}
                  />
                </div>
                
                <button type="submit" className="create-meeting-button">
                  Create New Meeting
                </button>
              </form>
              
              {meetings.length > 0 && (
                <div className="existing-meetings">
                  <h3>Or select an existing meeting:</h3>
                  <div className="meetings-list">
                    {meetings.map(meeting => (
                      <div
                        key={meeting.id}
                        className="meeting-item"
                        onClick={() => handleSelectMeeting(meeting.id)}
                      >
                        <h4>{meeting.title}</h4>
                        <p className="meeting-date">
                          {new Date(meeting.start_time).toLocaleString()}
                        </p>
                        {meeting.agenda && (
                          <p className="meeting-agenda">{meeting.agenda}</p>
                        )}
                      </div>
                    ))}
                  </div>
                </div>
              )}
            </>
          )}
        </div>
      ) : (
        <main>
          <ErrorBoundary>
            <AudioRecorder meetingId={meetingId} apiBaseUrl={apiBaseUrl} />
          </ErrorBoundary>
          <ErrorBoundary showDetails={true}>
            <AgentOutputs meetingId={meetingId} apiBaseUrl={apiBaseUrl} />
          </ErrorBoundary>
        </main>
      )}
    </div>
  );
}

export default App;----- End output of frontend/src/App.jsx -----

cat frontend/src/components/ErrorBoundary.jsx
----- Begin output of frontend/src/components/ErrorBoundary.jsx -----
import React from 'react';

class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false, error: null, errorInfo: null };
  }

  static getDerivedStateFromError(error) {
    // Update state so the next render will show the fallback UI
    return { hasError: true, error };
  }

  componentDidCatch(error, errorInfo) {
    // You can log the error to an error reporting service
    console.error("ErrorBoundary caught an error:", error, errorInfo);
    this.setState({ errorInfo });
  }

  render() {
    if (this.state.hasError) {
      // You can render any custom fallback UI
      return (
        <div className="error-boundary-fallback">
          <h2>Something went wrong.</h2>
          <button
            onClick={() => {
              this.setState({ hasError: false, error: null, errorInfo: null });
              // Optional: reload the page or reset app state
              // window.location.reload();
            }}
            className="reset-button"
          >
            Try Again
          </button>
          {this.props.showDetails && (
            <details style={{ whiteSpace: 'pre-wrap', marginTop: '20px' }}>
              <summary>Error Details</summary>
              <p>{this.state.error && this.state.error.toString()}</p>
              <p>Component Stack:</p>
              <pre>{this.state.errorInfo && this.state.errorInfo.componentStack}</pre>
            </details>
          )}
        </div>
      );
    }

    return this.props.children;
  }
}

export default ErrorBoundary;----- End output of frontend/src/components/ErrorBoundary.jsx -----

cat frontend/src/components/AgentOutputs.jsx
----- Begin output of frontend/src/components/AgentOutputs.jsx -----
import React, { useState, useEffect } from 'react';
import axios from 'axios';
import './../App.css';

// Define the Six Thinking Hats agents with their colors and descriptions
const SIX_THINKING_HATS = {
  "Data Provider": {
    color: "white",
    description: "Presents objective, factual information",
    displayName: "Vit Hatt (Data Provider)"
  },
  "Mood Lifter": {
    color: "red",
    description: "Lightens the mood with humor and creativity",
    displayName: "Rd Hatt (Mood Lifter)"
  },
  "Risk Identifier": {
    color: "black",
    description: "Pinpoints potential risks and challenges",
    displayName: "Svart Hatt (Risk Identifier)"
  },
  "Optimism Promoter": {
    color: "yellow",
    description: "Highlights positive aspects and opportunities",
    displayName: "Gul Hatt (Optimism Promoter)"
  },
  "Idea Generator": {
    color: "green",
    description: "Proposes creative solutions and innovative ideas",
    displayName: "Grn Hatt (Idea Generator)"
  },
  "Value Gatekeeper": {
    color: "blue",
    description: "Reviews outputs and selects valuable insights",
    displayName: "Bl Hatt (Value Gatekeeper)"
  }
};

const AgentOutputs = ({ meetingId, apiBaseUrl = 'http://localhost:8000' }) => {
  const [agentOutputs, setAgentOutputs] = useState({});
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [activeTab, setActiveTab] = useState('Data Provider');
  const [activeOutputIndex, setActiveOutputIndex] = useState(0);
  const [refreshInterval, setRefreshInterval] = useState(null);

  // Function to fetch agent outputs
  const fetchAgentOutputs = async () => {
    try {
      setLoading(true);
      const response = await axios.get(`${apiBaseUrl}/agent_outputs/${meetingId}`);
      
      // Validate response data
      if (!response.data || !Array.isArray(response.data.agent_outputs)) {
        console.error('Invalid response format:', response.data);
        setError('Received invalid data format from server');
        setLoading(false);
        return;
      }
      
      // Group outputs by agent name
      const outputsByAgent = {};
      response.data.agent_outputs.forEach(output => {
        // Validate output object
        if (!output || !output.agent_name) {
          console.warn('Skipping invalid output object:', output);
          return;
        }
        
        if (!outputsByAgent[output.agent_name]) {
          outputsByAgent[output.agent_name] = [];
        }
        
        // Ensure output_text is a string
        if (output.output_text === null || output.output_text === undefined) {
          output.output_text = '';
        } else if (typeof output.output_text !== 'string') {
          output.output_text = String(output.output_text);
        }
        
        outputsByAgent[output.agent_name].push(output);
      });
      
      // Sort each agent's outputs by timestamp (newest first)
      Object.keys(outputsByAgent).forEach(agentName => {
        try {
          outputsByAgent[agentName].sort((a, b) => {
            // Handle invalid dates gracefully
            const dateA = new Date(a.timestamp);
            const dateB = new Date(b.timestamp);
            
            if (isNaN(dateA.getTime()) && isNaN(dateB.getTime())) return 0;
            if (isNaN(dateA.getTime())) return 1;
            if (isNaN(dateB.getTime())) return -1;
            
            return dateB - dateA;
          });
        } catch (sortErr) {
          console.error(`Error sorting outputs for ${agentName}:`, sortErr);
        }
      });
      
      setAgentOutputs(outputsByAgent);
      setActiveOutputIndex(0); // Reset to most recent output when data refreshes
      setLoading(false);
      setError(null);
    } catch (err) {
      console.error('Error fetching agent outputs:', err);
      setError(`Failed to load agent outputs: ${err.message}`);
      setLoading(false);
    }
  };

  // Set up automatic refresh when component mounts
  useEffect(() => {
    // Initial fetch
    fetchAgentOutputs();
    
    // Set up interval for periodic refreshes (every 30 seconds)
    const intervalId = setInterval(fetchAgentOutputs, 30000);
    setRefreshInterval(intervalId);
    
    // Clean up interval when component unmounts
    return () => {
      if (refreshInterval) {
        clearInterval(refreshInterval);
      }
    };
  }, [meetingId, apiBaseUrl]);

  const handleTabClick = (agentName) => {
    setActiveTab(agentName);
    setActiveOutputIndex(0); // Reset to most recent output when changing tabs
  };

  const handlePreviousOutput = () => {
    if (agentOutputs[activeTab] && activeOutputIndex < agentOutputs[activeTab].length - 1) {
      setActiveOutputIndex(activeOutputIndex + 1);
    }
  };

  const handleNextOutput = () => {
    if (activeOutputIndex > 0) {
      setActiveOutputIndex(activeOutputIndex - 1);
    }
  };

  // Safe access to current output with additional checks
  const getCurrentOutput = () => {
    try {
      if (!agentOutputs || !agentOutputs[activeTab]) return null;
      if (!Array.isArray(agentOutputs[activeTab])) return null;
      if (activeOutputIndex >= agentOutputs[activeTab].length) return null;
      return agentOutputs[activeTab][activeOutputIndex];
    } catch (e) {
      console.error("Error accessing current output:", e);
      return null;
    }
  };

  const currentOutput = getCurrentOutput();
  const hasMultipleOutputs = agentOutputs[activeTab] && Array.isArray(agentOutputs[activeTab]) && agentOutputs[activeTab].length > 1;
  const isOldestOutput = agentOutputs[activeTab] && Array.isArray(agentOutputs[activeTab]) && activeOutputIndex === agentOutputs[activeTab].length - 1;
  const isNewestOutput = activeOutputIndex === 0;

  // Safely format timestamp
  const formatTimestamp = (timestamp) => {
    try {
      return timestamp ? new Date(timestamp).toLocaleString() : 'Unknown time';
    } catch (e) {
      console.error("Error formatting timestamp:", e);
      return 'Invalid timestamp';
    }
  };

  // Safely render HTML content
  const renderContent = (content) => {
    try {
      if (!content) {
        return <p>No content available</p>;
      }
      
      const outputText = typeof content === 'string' ? content : String(content);
      return <div dangerouslySetInnerHTML={{ __html: outputText }} />;
    } catch (e) {
      console.error("Error rendering content:", e);
      return <p>{String(content || '')}</p>;
    }
  };

  return (
    <div className="agent-outputs-container">
      <h2>Thinking Hats Insights</h2>
      
      {error && <div className="error-message">{error}</div>}
      
      {/* Tab navigation */}
      <div className="agent-tabs">
        {Object.keys(SIX_THINKING_HATS).map(agentName => (
          <button 
            key={agentName}
            className={`tab-button ${activeTab === agentName ? 'active' : ''} ${SIX_THINKING_HATS[agentName].color}-tab`}
            onClick={() => handleTabClick(agentName)}
          >
            {SIX_THINKING_HATS[agentName].displayName}
          </button>
        ))}
      </div>
      
      {/* Tab content */}
      <div className="tab-content">
        {loading ? (
          <div className="loading">Loading agent insights...</div>
        ) : (
          Object.keys(SIX_THINKING_HATS).map(agentName => (
            <div 
              key={agentName}
              className={`agent-output ${activeTab === agentName ? 'active' : 'hidden'}`}
            >
              <p className="agent-description">
                <em>{SIX_THINKING_HATS[agentName].description}</em>
              </p>
              
              {agentOutputs[agentName] && Array.isArray(agentOutputs[agentName]) && agentOutputs[agentName].length > 0 ? (
                currentOutput ? (
                  <div>
                    <div className="output-header">
                      <p className="timestamp">
                        <em>Generated at: {formatTimestamp(currentOutput.timestamp)}</em>
                      </p>
                      
                      {hasMultipleOutputs && (
                        <div className="output-navigation">
                          <button
                            className="nav-button"
                            onClick={handleNextOutput}
                            disabled={isNewestOutput}
                          >
                            Newer
                          </button>
                          <span className="output-count">
                            {activeOutputIndex + 1} of {agentOutputs[activeTab]?.length || 0}
                          </span>
                          <button
                            className="nav-button"
                            onClick={handlePreviousOutput}
                            disabled={isOldestOutput}
                          >
                            Older
                          </button>
                        </div>
                      )}
                    </div>
                    
                    <div className="output-text">
                      {renderContent(currentOutput.output_text)}
                    </div>
                  </div>
                ) : (
                  <div className="no-output">Error loading output</div>
                )
              ) : (
                <div className="no-output">Waiting for insights...</div>
              )}
            </div>
          ))
        )}
      </div>
    </div>
  );
};

export default AgentOutputs;----- End output of frontend/src/components/AgentOutputs.jsx -----

cat frontend/src/components/AudioRecorder.jsx
----- Begin output of frontend/src/components/AudioRecorder.jsx -----
import React, { useState, useRef, useEffect } from 'react';
import axios from 'axios';

const AudioRecorder = ({ meetingId = 1, apiBaseUrl = '/api' }) => {
  const [isRecording, setIsRecording] = useState(false);
  const [sessionStarted, setSessionStarted] = useState(false);
  const [errorMessage, setErrorMessage] = useState('');
  const [transcription, setTranscription] = useState('');
  const [audioSource, setAudioSource] = useState('microphone');
  const [audioDevices, setAudioDevices] = useState([]);
  const [selectedDeviceId, setSelectedDeviceId] = useState('default');
  
  const mediaRecorderRef = useRef(null);
  const audioContextRef = useRef(null);
  const processorNodeRef = useRef(null);
  const streamRef = useRef(null);
  
  // Configuration
  const SAMPLE_RATE = 16000; // Must match the backend's expected sample rate
  const CHUNK_DURATION_MS = 4000; // 4 seconds (matches MIN_CHUNK_DURATION in constants.py)
  
  // Load available audio devices on component mount
  useEffect(() => {
    const loadAudioDevices = async () => {
      try {
        // Get list of audio input devices
        const devices = await navigator.mediaDevices.enumerateDevices();
        const audioInputs = devices.filter(device => device.kind === 'audioinput');
        setAudioDevices(audioInputs);
        console.log('Available audio devices:', audioInputs);
      } catch (error) {
        console.error('Error loading audio devices:', error);
        setErrorMessage(`Failed to load audio devices: ${error.message}`);
      }
    };
    
    loadAudioDevices();
  }, []);
  
  useEffect(() => {
    // Cleanup function to stop recording when component unmounts
    return () => {
      if (isRecording) {
        stopRecording();
      }
      // Only end the session when component is unmounting, not on every re-render
      // This prevents accidentally stopping the agent processing
    };
  }, []);
  
  const startSession = async () => {
    try {
      const response = await axios.post(`${apiBaseUrl}/start_session/${meetingId}`);
      console.log('Session started:', response.data);
      setSessionStarted(true);
      setErrorMessage('');
    } catch (error) {
      console.error('Failed to start session:', error);
      setErrorMessage(`Failed to start session: ${error.message}`);
    }
  };
  
  const endSession = async () => {
    try {
      const response = await axios.post(`${apiBaseUrl}/end_session`);
      console.log('Session ended:', response.data);
      setSessionStarted(false);
      setErrorMessage('');
    } catch (error) {
      console.error('Failed to end session:', error);
      setErrorMessage(`Failed to end session: ${error.message}`);
    }
  };
  
  const getAudioStream = async () => {
    try {
      if (audioSource === 'microphone') {
        // Request microphone access with the selected device
        return await navigator.mediaDevices.getUserMedia({
          audio: {
            deviceId: selectedDeviceId ? { exact: selectedDeviceId } : undefined
          }
        });
      } else if (audioSource === 'system') {
        // Request system audio via screen capture
        // Note: This requires user to select "Share audio" in Chrome's screen share dialog
        const displayStream = await navigator.mediaDevices.getDisplayMedia({
          video: {
            cursor: 'never',
            displaySurface: 'monitor'
          },
          audio: {
            suppressLocalAudioPlayback: false, // Allow user to hear the audio they're capturing
            echoCancellation: false,
            noiseSuppression: false,
            autoGainControl: false
          }
        });
        
        // Extract the audio track from the display stream
        const audioTrack = displayStream.getAudioTracks()[0];
        if (!audioTrack) {
          throw new Error("No system audio detected. Did you select to share audio?");
        }
        
        // We need to keep the video track for Chrome to keep system audio working
        // but we can set it to an invisible 1px track
        const videoTrack = displayStream.getVideoTracks()[0];
        if (videoTrack) {
          videoTrack.enabled = false;
          
          // Create a practically invisible video element to maintain the stream
          const videoElement = document.createElement('video');
          videoElement.srcObject = new MediaStream([videoTrack]);
          videoElement.style.width = '1px';
          videoElement.style.height = '1px';
          videoElement.style.position = 'absolute';
          videoElement.style.opacity = '0.01';
          document.body.appendChild(videoElement);
          videoElement.play().catch(e => console.error("Error playing video:", e));
        }
        
        // Create a new stream with just the audio
        return displayStream;
      }
    } catch (error) {
      console.error(`Error accessing ${audioSource}:`, error);
      throw new Error(`Failed to access ${audioSource}: ${error.message}`);
    }
  };
  
  const startRecording = async () => {
    try {
      // Start the transcription session if not already started
      if (!sessionStarted) {
        await startSession();
      }
      
      // Get audio stream based on selected source
      streamRef.current = await getAudioStream();
      
      // Set up audio context and processor
      audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)({
        sampleRate: SAMPLE_RATE,
      });
      
      const source = audioContextRef.current.createMediaStreamSource(streamRef.current);
      
      // Create script processor node for audio processing
      processorNodeRef.current = audioContextRef.current.createScriptProcessor(4096, 1, 1);
      
      // Buffer to accumulate audio data
      let audioChunk = [];
      let lastSendTime = Date.now();
      
      processorNodeRef.current.onaudioprocess = (event) => {
        const audioData = event.inputBuffer.getChannelData(0);
        audioChunk = [...audioChunk, ...Array.from(audioData)];
        
        // Send audio chunk every CHUNK_DURATION_MS
        const currentTime = Date.now();
        if (currentTime - lastSendTime >= CHUNK_DURATION_MS) {
          // Convert audio data to Float32Array
          const audioArray = new Float32Array(audioChunk);
          
          // Send to server
          sendAudioChunk(audioArray);
          
          // Reset for next chunk
          audioChunk = [];
          lastSendTime = currentTime;
        }
      };
      
      // Connect nodes
      source.connect(processorNodeRef.current);
      processorNodeRef.current.connect(audioContextRef.current.destination);
      
      setIsRecording(true);
      setErrorMessage('');
    } catch (error) {
      console.error('Failed to start recording:', error);
      setErrorMessage(`Failed to start recording: ${error.message}`);
    }
  };
  
  const stopRecording = () => {
    try {
      // Disconnect and clean up audio nodes
      if (processorNodeRef.current) {
        processorNodeRef.current.disconnect();
      }
      
      if (audioContextRef.current && audioContextRef.current.state !== 'closed') {
        audioContextRef.current.close();
      }
      
      // Stop all tracks in the stream
      if (streamRef.current) {
        streamRef.current.getTracks().forEach(track => track.stop());
      }
      
      setIsRecording(false);
    } catch (error) {
      console.error('Error stopping recording:', error);
    }
  };
  
  const sendAudioChunk = async (audioArray) => {
    try {
      // Convert Float32Array to buffer
      const buffer = new ArrayBuffer(audioArray.length * 4);
      const view = new DataView(buffer);
      
      for (let i = 0; i < audioArray.length; i++) {
        view.setFloat32(i * 4, audioArray[i], true);
      }
      
      // Convert buffer to base64 string
      const base64Audio = arrayBufferToBase64(buffer);
      
      // Send to API
      const response = await axios.post(
        `${apiBaseUrl}/transcribe/${meetingId}`,
        {
          audio_data: base64Audio,
          sample_rate: SAMPLE_RATE
        }
      );
      
      // Update transcription if returned
      if (response.data.transcription) {
        setTranscription(prev => prev + ' ' + response.data.transcription);
      }
    } catch (error) {
      console.error('Error sending audio chunk:', error);
    }
  };
  
  // Helper to convert ArrayBuffer to base64 string
  const arrayBufferToBase64 = (buffer) => {
    let binary = '';
    const bytes = new Uint8Array(buffer);
    for (let i = 0; i < bytes.byteLength; i++) {
      binary += String.fromCharCode(bytes[i]);
    }
    return window.btoa(binary);
  };
  
  return (
    <div className="audio-recorder">
      <h2>Audio Recorder</h2>
      
      <div className="settings-panel">
        <h3>Audio Source Settings</h3>
        <div className="audio-source-selector">
          <div className="radio-group">
            <label>
              <input
                type="radio"
                value="microphone"
                checked={audioSource === 'microphone'}
                onChange={() => setAudioSource('microphone')}
                disabled={isRecording}
              />
              <span>Microphone</span>
            </label>
            <label>
              <input
                type="radio"
                value="system"
                checked={audioSource === 'system'}
                onChange={() => setAudioSource('system')}
                disabled={isRecording}
              />
              <span>System Audio</span>
            </label>
          </div>
          
          {audioSource === 'microphone' && (
            <div className="device-selector">
              <label htmlFor="microphone-select">Select Microphone:</label>
              <select
                id="microphone-select"
                value={selectedDeviceId}
                onChange={(e) => setSelectedDeviceId(e.target.value)}
                disabled={isRecording}
              >
                <option value="default">Default Microphone</option>
                {audioDevices.map(device => (
                  <option key={device.deviceId} value={device.deviceId}>
                    {device.label || `Microphone (${device.deviceId.slice(0, 8)}...)`}
                  </option>
                ))}
              </select>
            </div>
          )}
          
          {audioSource === 'system' && (
            <div className="system-audio-info">
              <p>
                <strong>Note:</strong> When prompted, you must select "Share audio" in the screen sharing dialog.
              </p>
              <p>
                System audio capture works best with Chrome browser version 74+.
              </p>
            </div>
          )}
        </div>
      </div>
      
      <div className="controls-container">
        <div className="recording-controls">
          <h3>Recording Controls</h3>
          {!isRecording ? (
            <button
              className="record-button"
              onClick={startRecording}
              disabled={isRecording}
            >
              Start Recording {audioSource === 'microphone' ? 'Microphone' : 'System Audio'}
            </button>
          ) : (
            <button
              className="stop-button"
              onClick={stopRecording}
              disabled={!isRecording}
            >
              Stop Recording
            </button>
          )}
          <p className="control-note">
            You can start and stop recording multiple times within the same session.
          </p>
        </div>
        
        {sessionStarted && (
          <div className="session-controls">
            <h3>Session Controls</h3>
            <button
              className="end-session-button"
              onClick={endSession}
              disabled={isRecording}
            >
              End Session & Stop Agent Processing
            </button>
            <p className="control-note">
              <strong>Note:</strong> This will stop all agent processing and analysis.
              Only click this when you're completely done with the meeting.
            </p>
          </div>
        )}
      </div>
      
      {errorMessage && (
        <div className="error-message">
          {errorMessage}
        </div>
      )}
      
      <div className="transcription-container">
        <h3>Live Transcription:</h3>
        <div className="transcription">
          {transcription || 'No transcription yet. Start recording to see transcription.'}
        </div>
      </div>
    </div>
  );
};

export default AudioRecorder;----- End output of frontend/src/components/AudioRecorder.jsx -----

cat frontend/src/index.jsx
----- Begin output of frontend/src/index.jsx -----
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';
import './App.css';

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);----- End output of frontend/src/index.jsx -----

cat frontend/src/App.css
----- Begin output of frontend/src/App.css -----
.App {
  text-align: center;
  font-family: Arial, sans-serif;
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
}

.App.widescreen {
  max-width: 1200px;
}

.App-header {
  background-color: #282c34;
  padding: 20px;
  color: white;
  border-radius: 8px;
  margin-bottom: 20px;
}

.audio-recorder {
  background-color: #f5f5f5;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Settings Panel Styles */
.settings-panel {
  background-color: #e8f5e9;
  border-radius: 6px;
  padding: 15px;
  margin-bottom: 20px;
  border: 1px solid #c8e6c9;
}

.settings-panel h3 {
  margin-top: 0;
  margin-bottom: 15px;
  color: #2e7d32;
  font-size: 18px;
}

.audio-source-selector {
  margin-bottom: 10px;
}

.radio-group {
  display: flex;
  gap: 20px;
  margin-bottom: 15px;
}

.radio-group label {
  display: flex;
  align-items: center;
  cursor: pointer;
}

.radio-group input[type="radio"] {
  margin-right: 8px;
}

.device-selector {
  margin-top: 10px;
  background-color: white;
  padding: 12px;
  border-radius: 4px;
  border: 1px solid #ddd;
}

.device-selector label {
  display: block;
  margin-bottom: 6px;
  font-weight: bold;
}

.device-selector select {
  width: 100%;
  padding: 8px;
  border-radius: 4px;
  border: 1px solid #ccc;
  background-color: white;
  font-size: 14px;
}

.system-audio-info {
  background-color: #fff8e1;
  border-left: 4px solid #ffc107;
  padding: 12px;
  margin-top: 10px;
  border-radius: 0 4px 4px 0;
}

.system-audio-info p {
  margin: 8px 0;
}

/* Controls Styles */
.controls-container {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin-bottom: 20px;
}

.recording-controls, .session-controls {
  background-color: #f5f5f5;
  border-radius: 8px;
  padding: 15px;
  border: 1px solid #e0e0e0;
}

.recording-controls h3 {
  color: #2e7d32;
  margin-top: 0;
}

.session-controls h3 {
  color: #1976d2;
  margin-top: 0;
}

.control-note {
  font-size: 14px;
  font-style: italic;
  margin-top: 10px;
  color: #666;
  padding: 8px;
  background-color: #fff8e1;
  border-radius: 4px;
  border-left: 3px solid #ffc107;
}

button {
  border: none;
  padding: 12px 24px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  font-weight: bold;
  margin: 4px 2px;
  cursor: pointer;
  border-radius: 4px;
  transition: all 0.3s;
}

.record-button {
  background-color: #4caf50;
  color: white;
}

.record-button:hover {
  background-color: #45a049;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.stop-button {
  background-color: #f44336;
  color: white;
}

.stop-button:hover {
  background-color: #d32f2f;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.end-session-button {
  background-color: #2196f3;
  color: white;
}

.end-session-button:hover {
  background-color: #1976d2;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

button:disabled {
  background-color: #cccccc !important;
  cursor: not-allowed;
  box-shadow: none !important;
  opacity: 0.7;
}

.error-message {
  color: #f44336;
  margin: 10px 0;
  padding: 10px;
  background-color: #ffebee;
  border-radius: 4px;
  border-left: 4px solid #f44336;
}

.transcription-container {
  margin-top: 20px;
  text-align: left;
}

.transcription {
  background-color: white;
  border: 1px solid #ddd;
  padding: 15px;
  border-radius: 4px;
  min-height: 150px;
  max-height: 300px;
  overflow-y: auto;
  white-space: pre-wrap;
  line-height: 1.5;
}

/* Agent Outputs Styles */
.agent-outputs-container {
  margin-top: 20px;
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 15px;
  background-color: #f9f9f9;
  max-width: 100%;
}

.agent-tabs {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
  margin-bottom: 15px;
}

.tab-button {
  padding: 8px 12px;
  background-color: #e0e0e0;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.3s ease;
  border-bottom: 3px solid transparent;
}

.tab-button:hover {
  background-color: #d0d0d0;
}

.tab-button.active {
  border-bottom: 3px solid #007bff;
  font-weight: bold;
}

/* Hat color styles */
.white-tab {
  background-color: #f0f0f0;
  color: #333;
}

.red-tab {
  background-color: #ffebee;
  color: #c62828;
}

.black-tab {
  background-color: #424242;
  color: white;
}

.yellow-tab {
  background-color: #fffde7;
  color: #f57f17;
}

.green-tab {
  background-color: #e8f5e9;
  color: #2e7d32;
}

.blue-tab {
  background-color: #e3f2fd;
  color: #1565c0;
}

.tab-content {
  background-color: white;
  border-radius: 5px;
  padding: 15px;
  min-height: 250px;
  border: 1px solid #eee;
}

.agent-output {
  transition: opacity 0.3s ease;
}

.agent-output.hidden {
  display: none;
}

.agent-description {
  color: #666;
  margin-bottom: 10px;
  border-bottom: 1px solid #eee;
  padding-bottom: 10px;
}

.timestamp {
  font-size: 12px;
  color: #888;
  text-align: right;
}

.output-text {
  line-height: 1.6;
  white-space: pre-wrap;
}

.no-output {
  color: #888;
  font-style: italic;
  padding: 20px;
  text-align: center;
  background-color: #f5f5f5;
  border-radius: 4px;
}

.loading {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 200px;
  color: #666;
}

/* Agent Output Navigation */
.output-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
  padding-bottom: 8px;
  border-bottom: 1px solid #eee;
}

.output-navigation {
  display: flex;
  align-items: center;
  gap: 10px;
}

.nav-button {
  background-color: #f0f0f0;
  color: #333;
  padding: 4px 10px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: normal;
  border: 1px solid #ddd;
}

.nav-button:hover:not(:disabled) {
  background-color: #e0e0e0;
}

.nav-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.output-count {
  font-size: 12px;
  color: #666;
  background-color: #f5f5f5;
  padding: 2px 8px;
  border-radius: 10px;
}

/* Update output-text styles */
.output-text {
  padding: 10px;
  background-color: #f9f9f9;
  border-radius: 4px;
  border: 1px solid #eee;
}

/* Meeting Setup Styles */
.meeting-setup {
  background-color: white;
  border-radius: 8px;
  padding: 20px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  margin-bottom: 20px;
}

.meeting-form {
  display: flex;
  flex-direction: column;
  gap: 15px;
  margin: 20px 0;
}

.form-group {
  text-align: left;
}

.form-group label {
  display: block;
  margin-bottom: 5px;
  font-weight: bold;
  color: #333;
}

.form-group input,
.form-group textarea {
  width: 100%;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-family: inherit;
  font-size: 16px;
}

.create-meeting-button {
  background-color: #4caf50;
  color: white;
  padding: 12px;
  font-size: 16px;
  margin-top: 10px;
}

.existing-meetings {
  margin-top: 30px;
  border-top: 1px solid #eee;
  padding-top: 20px;
}

.meetings-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 15px;
  margin-top: 15px;
}

.meeting-item {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 5px;
  padding: 15px;
  cursor: pointer;
  transition: all 0.2s;
}

.meeting-item:hover {
  background-color: #f0f0f0;
  border-color: #ccc;
}

.meeting-item h4 {
  margin: 0 0 10px 0;
  color: #333;
}

.meeting-date {
  font-size: 12px;
  color: #666;
  margin: 5px 0;
}

.meeting-agenda {
  font-size: 13px;
  font-style: italic;
  margin-top: 10px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}----- End output of frontend/src/App.css -----

cat frontend/nginx.conf
----- Begin output of frontend/nginx.conf -----
server {
    listen 80;
    location / {
        root /usr/share/nginx/html;
        index index.html;
        try_files $uri $uri/ /index.html;
    }
    location /api/ {
        proxy_pass http://backend:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}----- End output of frontend/nginx.conf -----

cat implementation_plan.md
----- Begin output of implementation_plan.md -----
## Implementation Plan for AI Agents

**Overall Goal:** Implement AI agents to provide unique insights from live meetings, making them more efficient and fun.

**Key Components:**

*   **Transcription Pipeline:** Captures audio, transcribes it using the KBLab/kb-whisper-medium model, and stores it in an SQLite database.
*   **Database:** SQLite database with tables for `meetings`, `meeting_relations`, `transcripts`, and `agents_output`.
*   **Agents:** Instances of the `Agent` class from the `agno` framework, each with a specific role (White Hat, Red Hat, Black Hat, Yellow Hat, Green Hat, Blue Hat).
*   **Streamlit App:** Provides a live interface to view transcription and agent outputs.

**Updated Implementation Plan:**

1.  **Integrate the Six Thinking Hats Agents:**
    *   Create agent configurations for each of the six thinking hats (White, Red, Black, Yellow, Green, and Blue) as described in `agent.md`. Use the examples in `README.md` as a starting point.
    *   Ensure each agent has a clear `description`, `instructions`, and `additional_context` (meeting agenda and previous meeting summaries).
    *   Implement the Red Hat's image generation functionality using an appropriate image generation API.
    *   Implement the Blue Hat's value gatekeeping logic to determine which outputs are stored in the database.

2.  **Modify the Agent Processing Workflow:**
    *   Update the agent processing loop to include all six agents.
    *   Ensure the agents process the transcription data periodically (every 5-10 seconds).
    *   **Store the outputs of each agent in the `agents_output` table, including the `agent_id`, `agent_name`, `output_text`, and `timestamp`.**
    *   Implement the Red Hat's image generation and storage in the database.
    *   Implement the Blue Hat's logic for filtering and storing valuable insights in the database.

3.  **Update the Streamlit App:**
    *   Modify the Streamlit app to display the outputs of all six agents in real-time.
    *   Use separate placeholders for each agent's output.
    *   **Fetch the agent outputs from the database and display them in the Streamlit app.**
    *   Update the display every 5 seconds to show the latest outputs.
    *   Implement a mechanism to display the Red Hat's generated images.

4.  **Database Modifications:**
    *   Ensure the database schema includes all necessary fields for storing agent outputs, including the Red Hat's images and the Blue Hat's value judgments.
    *   Modify the database queries to retrieve and display the agent outputs in the Streamlit app.

5.  **Testing and Refinement:**
    *   Thoroughly test the implementation to ensure the agents are functioning correctly and providing valuable insights.
    *   Refine the agent configurations and processing logic as needed to optimize their performance and accuracy.

**Detailed Steps:**

1.  **File Analysis:**
    *   Examine the existing code files (`api.py`, `audio_recorder.py`, `audio_system_recorder.py`, `audio_transcribe.py`, `constants.py`, `database.py`, `streamlit_app.py`) to understand the current implementation of the transcription pipeline, database interaction, and Streamlit app.
    *   Identify the relevant code sections that need to be modified to integrate the agents.

2.  **Code Modifications:**
    *   Modify the `database.py` file to ensure the database schema is up-to-date.
    *   Modify the `audio_transcribe.py` file to incorporate the agent processing workflow.
    *   Modify the `streamlit_app.py` file to display the agent outputs in real-time.

3.  **Agent Implementation:**
    *   Create a new file (e.g., `agents.py`) to define the agent configurations.
    *   Implement the Red Hat's image generation functionality.
    *   Implement the Blue Hat's value gatekeeping logic.

4.  **Integration and Testing:**
    *   Integrate the new code into the existing codebase.
    *   Test the implementation thoroughly to ensure the agents are functioning correctly.
    *   Refine the agent configurations and processing logic as needed.

**Mermaid Diagram:**

```mermaid
graph LR
    A[Audio Input] --> B(Transcription Pipeline)
    B --> C{Database}
    C --> D{Agents}
    D --> C
    C --> E(Streamlit App)
    E --> F[User Interface]

    subgraph Transcription Pipeline
        B --> B1[Capture Audio]
        B1 --> B2[Transcribe Audio]
        B2 --> B3[Store Transcript]
    end

    subgraph Agents
        D --> D1[White Hat]
        D --> D2[Red Hat]
        D --> D3[Black Hat]
        D --> D4[Yellow Hat]
        D --> D5[Green Hat]
        D --> D6[Blue Hat]
    end

    style A fill:#f9f,stroke:#333,stroke-width:2px
    style F fill:#f9f,stroke:#333,stroke-width:2px----- End output of implementation_plan.md -----

cat __pycache__/database.cpython-311.pyc
----- Begin output of __pycache__/database.cpython-311.pyc -----

    wfg                     H   d dl mZmZmZmZmZmZ d dlmZ d dl	m
Z
mZ d dlmZ  e            Z G d de          Z G d de          Z G d	 d
e          Z G d de          Z ed          Zej                            e            ee          Zd Zd ZddZdS )    )create_engineColumnIntegerTextDateTime
ForeignKey)declarative_base)relationshipsessionmaker)datetimec                       e Zd ZdZ eed          Z eed          Z eed          Z	 ee
d          Z ee
d          Z edd          Z ed	d          Zd
S )MeetingmeetingsTprimary_keyFnullable
Transcriptmeeting)backrefAgentOutputN)__name__
__module____qualname____tablename__r   r   idr   
start_timeend_timer   titleagendar
   transcriptsoutputs     /app/database.pyr   r      s        M	T	*	*	*B5111Jvh...HF4%(((EVD4(((F,|Y???Kl=)<<<GGGr$   r   c                       e Zd ZdZ eed          Z ee ed          d          Z ee ed          d          Z	dS )MeetingRelationmeeting_relationsTr   meetings.idFr   N)
r   r   r   r   r   r   r   r   
meeting_idprevious_meeting_idr#   r$   r%   r'   r'      sj        'M	T	*	*	*BM!:!:UKKKJ &**]*C*CeTTTr$   r'   c                       e Zd ZdZ eed          Z ee ed          d          Z ee	d          Z
 eed          ZdS )r   r!   Tr   r)   Fr   N)r   r   r   r   r   r   r   r   r*   r   	timestampr   textr#   r$   r%   r   r      so        !M	T	*	*	*BM!:!:UKKKJx%000I6$'''DDDr$   r   c                       e Zd ZdZ eed          Z ee ed          d          Z eed          Z	 ee
d          Z ee
d          Z eed          ZdS )r   agents_outputTr   r)   Fr   N)r   r   r   r   r   r   r   r   r*   agent_idr   
agent_nameoutput_textr   r-   r#   r$   r%   r   r      s        #M	T	*	*	*BM!:!:UKKKJvg...Hu---J&...Kx%000IIIr$   r   zsqlite:///trans_agents.db)bindc                    	 t                      }t          | t          j                    |          }|                    |           |                                 t          d|             n)# t          $ r}t          d|            Y d}~nd}~ww xY w|                                 dS # |                                 w xY w)z,Saves the transcript to the SQLite database.)r*   r-   r.   z-Transcript saved to database for meeting ID: z%Error saving transcript to database: N)	Sessionr   r   nowaddcommitprint	Exceptionclose)r*   r.   session
transcriptes        r%   save_transcript_to_dbr@   -   s    ))  :VZ[[[
 	JJjJJKKKK ; ; ;9a99::::::::; 	s0   A,A/ .B. /
B9BB. BB. .Cc                    	 t                      }t          | |||t          j                              }|                    |           |                                 t          d|  d|            	 |                                 dS # t          $ r1}t          d|            Y d}~|                                 dS d}~ww xY w# |                                 w xY w)z.Saves the agent output to the SQLite database.)r*   r1   r2   r3   r-   z/Agent output saved to database for meeting ID: z	, agent: Tz'Error saving agent output to database: NF)	r6   r   r   r7   r8   r9   r:   r<   r;   )r*   r1   r2   r3   r=   agent_outputr?   s          r%   save_agent_output_to_dbrC   @   s    )) #!!#lnn
 
 
 	L!!!a
aaU_aabbb 		    ;;;<<<uuu	 	s*   A1B
 

CC &C  CC CNc                 B   	 t                      }|                    t                                        t          j        | k              }|r#|                    t          j        |k              }|                    t          j                                                  	                                }||
                                 S # t          $ r2}t          d|            g cY d}~|
                                 S d}~ww xY w# |
                                 w xY w)z8Retrieves agent outputs for a meeting from the database.z.Error retrieving agent outputs from database: N)r6   queryr   filterr*   r2   order_byr-   descallr<   r;   r:   )r*   r2   r=   rE   r"   r?   s         r%   get_agent_outputsrJ   [   s   ))k**11+2HJ2VWW 	GLL!7:!EFFE..!6!;!;!=!=>>BBDD 		    BqBBCCC						 	s0   B2C	 	
DD &D'D  DD D)N)
sqlalchemyr   r   r   r   r   r   sqlalchemy.ext.declarativer	   sqlalchemy.ormr
   r   r   Baser   r'   r   r   enginemetadata
create_allr6   r@   rC   rJ   r#   r$   r%   <module>rR      s   Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q Q 7 7 7 7 7 7 5 5 5 5 5 5 5 5      = = = = =d = = =U U U U Ud U U U( ( ( ( ( ( ( (1 1 1 1 1$ 1 1 1 
2	3	3         
,F
#
#
#  &  6     r$   ----- End output of __pycache__/database.cpython-311.pyc -----

cat __pycache__/constants.cpython-311.pyc
----- Begin output of __pycache__/constants.cpython-311.pyc -----

    wfg5                         d Z dZdZdZdZdZdS )zKBLab/kb-whisper-small   g{Gz?g?i>     N)
MODEL_NAMEMIN_CHUNK_DURATIONSILENCE_THRESHOLDSILENCE_DURATIONSAMPLE_RATEDEFAULT_SYSTEM_DEVICE     /app/constants.py<module>r      s3    &
        r   ----- End output of __pycache__/constants.cpython-311.pyc -----

cat __pycache__/audio_transcribe.cpython-311.pyc
----- Begin output of __pycache__/audio_transcribe.cpython-311.pyc -----

    wfgn                         d dl Z d dlZd dlZd dlZd dlmZ d dlmZm	Z	  G d d          Z
d dlmZ edk    r ed           dS dS )	    N)pipeline)
MODEL_NAMESAMPLE_RATEc                   r    e Zd Zeej                                        rdndfdZd Zd Z	d Z
efdZd Zd	S )
AudioTranscriberzcuda:0cpuc                     || _         || _        d | _        t          d| j        d| j                   | _        d | _        d | _        d| _        d| _        d S )Nzautomatic-speech-recognition   )modelchunk_length_sdeviceF<   )	r   
model_name
meeting_idr   transcriberagent_processoragent_processing_threadagent_processing_activeagent_processing_interval)selfr   r   s      /app/audio_transcribe.py__init__zAudioTranscriber.__init__	   sf    $#$B*./35+/;8 8 8  $'+$',$)+&&&    c                 <    || _         |                                  dS )z%Set the meeting ID for transcription.N)r   _initialize_agent_processor)r   r   s     r   set_meeting_idzAudioTranscriber.set_meeting_id   s!    $((*****r   c                    | j         t          d           dS 	 ddlm}  || j                   | _        | j        sYd| _        t          j        | j        d          | _	        | j	        
                                 t          d| j                     dS dS # t          $ r}t          d|            Y d}~dS d}~ww xY w)	z?Initialize the agent processor and start the processing thread.Nz5Cannot initialize agent processor: No meeting ID set.r   )AgentProcessorT)targetdaemonz)Agent processing started for meeting ID: z$Error initializing agent processor: )r   printagents.processorr   r   r   	threadingThread_agent_processing_loopr   start	Exception)r   r   es      r   r   z,AudioTranscriber._initialize_agent_processor   s   ?"IJJJF	>777777#1>$/#B#BD  / U/3,/8/?60 0 0, ,22444S$/SSTTTTTU U  	> 	> 	><<<=========	>s   A9B 
B>!B99B>c                 \   | j         r	 ddlm} t          d            || j                  }|r!t          dt          |           d           nt          d           n)# t          $ r}t          d|            Y d}~nd}~ww xY wt          j        | j	                   | j         dS dS )	zIBackground thread that periodically processes transcripts through agents.r   )process_latest_transcriptz.Processing latest transcript through agents...z*Successfully processed transcript through z agents.z!No outputs generated from agents.z Error in agent processing loop: N)
r   r"   r*   r!   r   lenr'   timesleepr   )r   r*   outputsr(   s       r   r%   z'AudioTranscriber._agent_processing_loop4   s    * 	7>FFFFFFFGGG33DODD ?]s7||]]]^^^^=>>> > > ><<<========> Jt5666! * 	7 	7 	7 	7 	7s   AA! !
B+BBc                    	 t          d           t          |t          j                  st          j        |          }t          |j                  dk    r5|j        d         dk    r|                    d          }n4|dddf         }n't          |j                  dk    rt          d          |j	        t          j
        k    r|                    t          j
                  }t          d|j         d	|j	                    ||d
}|                     |ddd          }t          d           t          d|d                     | j        7t          | j        |d                    | j        |                                  nt          d           |d         S # t"          $ r}t          d|            Y d}~dS d}~ww xY w)z<Transcribes the given audio data using the configured model.zTranscribing audio chunk...      )axisNr   z%Audio data has more than 2 dimensionszAudio data shape: z	, dtype: )arraysampling_rater
      F)r   
batch_sizereturn_timestampszTranscription complete.zTranscription: textz4Warning: No meeting_id set, transcription not saved.zError during transcription: )r!   
isinstancenpndarrayr3   r+   shapemean
ValueErrordtypefloat32astyper   r   save_transcript_to_dbr   r   r'   )r   
audio_datasample_rateaudio_inputtranscriptionr(   s         r   transcribe_audioz!AudioTranscriber.transcribe_audioH   s   '	/000j"*55 2Xj11
 :#$$))#A&**!+a!8!8JJ!+AAAqD!1JJZ%&&** !HIII 2:--'..rz::
Tz'7TT*BRTTUUU$.MMK ,,[;=79>C - E EM +,,,;M&$9;;<<<*%do}V7LMMM '/44666LMMM (( 	 	 	44455544444	s   FF   
G*GGc                     d| _         | j        rE| j                                        r.| j                            d           t	          d           dS dS dS )z!Stop the agent processing thread.Fg       @)timeoutzAgent processing stopped.N)r   r   is_alivejoinr!   )r   s    r   stopzAudioTranscriber.stops   sn    ',$' 	/D,H,Q,Q,S,S 	/(--c-:::-.....	/ 	/ 	/ 	/r   N)__name__
__module____qualname__r   torchcudais_availabler   r   r   r%   r   rG   rL    r   r   r   r      s        ",$)J$;$;$=$=H5, , , ,+ + +> > >.7 7 7( 8C ) ) ) )V/ / / / /r   r   )rB   __main__zEAudioTranscribe class initialized. Requires audio data to transcribe.)rP   numpyr:   r#   r,   transformersr   	constantsr   r   r   databaserB   rM   r!   rS   r   r   <module>rY      s              ! ! ! ! ! ! - - - - - - - -p/ p/ p/ p/ p/ p/ p/ p/d + * * * * *z	E
QRRRRR r   ----- End output of __pycache__/audio_transcribe.cpython-311.pyc -----

cat __pycache__/api.cpython-311.pyc
----- Begin output of __pycache__/api.cpython-311.pyc -----

    wfg                        d dl Z d dlZd dlZd dlmZ  e             d dlmZmZm	Z	 d dl
mZ d dlmZ d dlmZmZmZ d dlmZ d dlmZ d d	lmZmZmZmZ d d
lmZ  e            Ze                    edgddgdg           da G d de          Ze                     d          de!fd            Z"e                     d          de!defd            Z#e                     d          d             Z$ G d de          Z% G d de          Z&e'                    d          d             Z(e                     d          de%fd            Z)e'                    d           de!fd!            Z*e+d"k    r e j,        ed#d$%           dS dS )&    N)load_dotenv)FastAPIBodyHTTPException)CORSMiddleware)	BaseModel)DictOptionalList)AudioTranscriber)SAMPLE_RATE)get_agent_outputsAgentOutputSessionMeeting)datetime*T)allow_originsallow_credentialsallow_methodsallow_headersc                   8    e Zd ZU dZeed<   eZee	         ed<   dS )AudioChunkModelz3Model for receiving audio chunks from the frontend.
audio_datasample_rateN)
__name__
__module____qualname____doc__str__annotations__r   r   r
   int     /app/api.pyr   r      s5         ==OOO!,K#,,,,,r$   r   z/start_session/{meeting_id}
meeting_idc                    K   	 t                      at                              |            dd|  iS # t          $ r&}t	          ddt          |                     d}~ww xY w)z'Initialize a new transcription session.messagez.Transcription session started for meeting ID:   zFailed to start session: status_codedetailN)r   transcriberset_meeting_id	Exceptionr   r    )r&   es     r%   start_sessionr1   "   s      Z&(("":...XJXXYY Z Z Z4XPSTUPVPV4X4XYYYYZs   .3 
A#!AA#z/transcribe/{meeting_id}datac                   K   t           s(t                      a t                               |            	 t          j        |j                  }t          j        |t          j                  }t           	                    ||j
                  }|ddS # t          $ r&}t          ddt          |                     d}~ww xY w)z&Receive audio chunk and transcribe it.)dtypez"Audio chunk processed successfully)transcriptionr(   r)   zTranscription error: r*   N)r-   r   r.   base64	b64decoder   np
frombufferfloat32transcribe_audior   r/   r   r    )r&   r2   audio_bytesaudio_arrayresultr0   s         r%   r;   r;   -   s        /&(("":...V&t77mKrzBBB --k4;KLL $;
 
 	
  V V V4TCPQFF4T4TUUUUVs   AB 
C!B<<Cz/end_sessionc                  Z   K   t           rt                                            da ddiS ddiS )z&End the current transcription session.Nr(   zTranscription session endedzNo active transcription session)r-   stopr#   r$   r%   end_sessionrA   E   s?        >899<==r$   c                   8    e Zd ZU dZeed<   dZee         ed<   dS )MeetingModelzModel for meeting data.titleNagenda)r   r   r   r   r    r!   rE   r
   r#   r$   r%   rC   rC   P   s5         !!JJJ FHSM     r$   rC   c                   F    e Zd ZU dZeed<   eed<   eed<   eed<   eed<   dS )AgentOutputModelzModel for agent output data.idagent_id
agent_nameoutput_text	timestampN)r   r   r   r   r"   r!   r    r#   r$   r%   rG   rG   U   sF         &&GGGMMMOOONNNNNr$   rG   z	/meetingsc            	      r  K   	 t                      } |                     t                                        t          j                                                                                  }g }|D ]c}|                    |j        |j	        |j
        |j                                        |j        r|j                                        ndd           dd|i|                                  S # t          $ r&}t          ddt!          |                     d}~ww xY w# |                                  w xY w)zGet a list of all meetings.N)rH   rD   rE   
start_timeend_timemeetingsr)   zFailed to fetch meetings: r*   )r   queryr   order_byrN   descallappendrH   rD   rE   	isoformatrO   closer/   r   r    )sessionrP   r>   meetingr0   s        r%   list_meetingsrZ   ]   sE     ))==))2273E3J3J3L3LMMQQSS  	 	GMMj !.%0::<<<C<LVG,66888RV      F# 	  [ [ [4YQTUVQWQW4Y4YZZZZ[ 	s$   CC- -
D7!DDD   D6rY   c                 v  K   	 t                      }t          | j        | j        t	          j                              }|                    |           |                                 |j        }|	                                 d|dS # t          $ r&}t          ddt          |                     d}~ww xY w)zCreate a new meeting.)rD   rE   rN   zMeeting created successfully)r(   r&   r)   zFailed to create meeting: r*   N)r   r   rD   rE   r   nowaddcommitrH   rW   r/   r   r    )rY   rX   new_meetingr&   r0   s        r%   create_meetingr`   u   s      [)) ->|~~
 
 
 	K    ^
9TTT [ [ [4YQTUVQWQW4Y4YZZZZ[s   BB 
B8!B33B8z/agent_outputs/{meeting_id}c           	      .  K   	 t          |           }g }|D ]H}|                    |j        |j        |j        |j        |j                                        d           Id|iS # t          $ r&}t          ddt          |                     d}~ww xY w)z-Get all agent outputs for a specific meeting.)rH   rI   rJ   rK   rL   agent_outputsr)   zFailed to fetch agent outputs: r*   N)r   rU   rH   rI   rJ   rK   rL   rV   r/   r   r    )r&   outputsr>   outputr0   s        r%   get_meeting_agent_outputsre      s      `#J//  	 	FMMi"O$/%1#-7799       (( ` ` `4^VYZ[V\V\4^4^____`s   AA$ $
B.!BB__main__z0.0.0.0i@  )hostport)-uvicornnumpyr8   r6   dotenvr   fastapir   r   r   fastapi.middleware.corsr   pydanticr   typingr	   r
   r   audio_transcriber   	constantsr   databaser   r   r   r   r   appadd_middlewarer-   r   postr"   r1   r;   rA   rC   rG   getrZ   r`   re   r   runr#   r$   r%   <module>rx      s1                0 0 0 0 0 0 0 0 0 0 2 2 2 2 2 2       ' ' ' ' ' ' ' ' ' ' - - - - - - ! ! ! ! ! ! E E E E E E E E E E E E      gii   %%%     - - - - -i - - -
 
'((ZC Z Z Z )(Z 
$%%Vs V/ V V V &%V. .> > >! ! ! ! !9 ! ! !
    y      . +[, [ [ [ [, 	&''` ` ` ` ('`* zGK)$////// r$   ----- End output of __pycache__/api.cpython-311.pyc -----

cat docker/docker-compose.yml
----- Begin output of docker/docker-compose.yml -----
services:
  backend:
    build:
      context: ./../backend
      dockerfile: Dockerfile
    environment:
      - DB_PATH=/app/data/trans_agents.db
    volumes:
      - ./data:/app/data
    networks:
      - app-network

  frontend:
    build:
      context: ./../frontend
      dockerfile: Dockerfile
    ports:
      - "80:80"
    depends_on:
      - backend
    networks:
      - app-network

networks:
  app-network:
    driver: bridge----- End output of docker/docker-compose.yml -----

cat docker/docker-start.sh
----- Begin output of docker/docker-start.sh -----
#!/bin/bash

# Move to project root
cd "$(dirname "$0")/.."

# Colors for output
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
NC='\033[0m' # No Color

echo -e "${YELLOW}Starting Docker build and deployment for the Audio Transcription App...${NC}"

# Check if Docker is installed and running
if ! docker info > /dev/null 2>&1; then
  echo -e "${RED}Error: Docker is not running or not installed${NC}"
  echo "Please install Docker and ensure the daemon is running."
  exit 1
fi

# Default ports (adjusted to avoid conflict with sound-saver-portal)
BACKEND_PORT=8000
FRONTEND_PORT=80

# Check CUDA availability
USE_GPU=false
if command -v nvidia-smi > /dev/null 2>&1 && nvidia-smi > /dev/null 2>&1; then
  echo -e "${YELLOW}NVIDIA GPU with CUDA support detected.${NC}"
  echo -e "${YELLOW}Would you like to use the GPU? (y/N)${NC}"
  read -r response
  if [[ "$response" =~ ^[Yy]$ ]]; then
    USE_GPU=true
    echo -e "${GREEN}Configuring to use GPU...${NC}"
  else
    echo -e "${YELLOW}Proceeding with CPU only...${NC}"
  fi
else
  echo -e "${YELLOW}No CUDA-capable GPU detected. Using CPU...${NC}"
fi

# Check if ports are already in use
if lsof -i :$BACKEND_PORT > /dev/null 2>&1; then
  echo -e "${RED}Error: Port $BACKEND_PORT is already in use.${NC}"
  echo "Please free the port or edit docker-compose.yml to use a different backend port."
  exit 1
fi
if lsof -i :$FRONTEND_PORT > /dev/null 2>&1; then
  echo -e "${RED}Error: Port $FRONTEND_PORT is already in use.${NC}"
  echo "Please free the port or edit docker-compose.yml to use a different frontend port."
  exit 1
fi

# Create .env file if it doesn't exist
if [ ! -f backend/.env ]; then
  echo -e "${YELLOW}Creating sample .env file...${NC}"
  cat > backend/.env << EOF
# API Keys and Credentials
OPENAI_API_KEY=your_openai_api_key_here
EOF
  echo -e "${GREEN}Created .env file. Please edit it to add your actual API keys and settings.${NC}"
  echo -e "${YELLOW}Press Enter to continue after editing the .env file, or Ctrl+C to exit...${NC}"
  read
fi

# Build and start containers
echo -e "${YELLOW}Building and starting Docker containers...${NC}"
if [ "$USE_GPU" = true ]; then
  # Use runtime: nvidia via docker-compose.yml or docker run workaround
  docker-compose -f docker/docker-compose.yml up --build -d
else
  docker-compose -f docker/docker-compose.yml up --build -d
fi

# Wait for services to start
echo -e "${YELLOW}Waiting for services to start...${NC}"
sleep 5

# Check if services are running
if docker-compose -f docker/docker-compose.yml ps | grep -q "Up"; then
  echo -e "${GREEN}Services are up and running!${NC}"
  
  # Get host IP (localhost on macOS, IP on Linux)
  if [[ "$OSTYPE" == "darwin"* ]]; then
    HOST_IP="localhost"
  else
    HOST_IP=$(hostname -I | awk '{print $1}')
  fi
  
  echo -e "${GREEN}===== Application URLs =====${NC}"
  echo -e "Frontend: ${GREEN}http://$HOST_IP:$FRONTEND_PORT${NC}"
  echo -e "Backend API: ${GREEN}http://$HOST_IP:$BACKEND_PORT${NC}"
  echo ""
  echo -e "${YELLOW}Use the following command to view logs:${NC}"
  echo "docker-compose logs -f"
  echo ""
  echo -e "${YELLOW}To stop the services:${NC}"
  echo "docker-compose down"
else
  echo -e "${RED}There was an issue starting the services.${NC}"
  echo "Please check the logs with: docker-compose logs"
fi
----- End output of docker/docker-start.sh -----

cat README.md
----- Begin output of README.md -----

---

# Audio Transcription System with React Frontend

This project is an audio transcription system featuring a React frontend for recording audio and a FastAPI backend for processing and transcribing it.

## System Overview

The system consists of two main components:

1. **React Frontend**: Captures audio from your microphone or system, processes it into chunks, and sends it to the backend API.
2. **FastAPI Backend**: Receives audio data, transcribes it using the KBLab/kb-whisper models, stores transcripts in a database, and processes them with agents.

## Setup Instructions

The application is deployed using a single script (`docker-start.sh`) that leverages Docker and Docker Compose to build and run both the frontend and backend. You can change which model you wanna use in the constants.py file, deafult right now is KBLab/kb-whisper-small. Follow these steps to get started: 

1. **Ensure Prerequisites are Installed**:
   - **Docker**: Required to build and run the application containers.
   - **Docker Compose**: Required to manage the multi-container setup.

   Verify Docker is installed and running by executing:
   ```bash
   docker info
   ```
   If you see an error, install Docker and ensure the Docker daemon is active.

2. **Run the Setup Script**:
   Execute the provided script to build and deploy the application:
   ```bash
   ./docker-start.sh
   ```

   The script will:
   - Check if Docker is running.
   - Create a sample `.env` file if one doesnt exist.
   - Prompt you to edit the `.env` file with your API keys and settings.
   - Build and start the Docker containers for the frontend and backend.
   - Display URLs to access the application once its running.

3. **Access the Application**:
   After the script completes successfully, you can access:
   - **Frontend**: `http://localhost` or `http://<your-ip-address>`
   - **Backend API**: `http://localhost:8000` or `http://<your-ip-address>:8000`

4. **View Logs** (optional):
   To monitor the application in real-time:
   ```bash
   docker-compose logs -f
   ```

5. **Stop the Application**:
   To shut down the services:
   ```bash
   docker-compose down
   ```

## Configuration

The script generates a sample `.env` file if it doesnt exist. You must edit this file to provide necessary configurations. The sample `.env` looks like this:

```
# API Keys and Credentials
OPENAI_API_KEY=your_openai_api_key_here

# Database Settings
DB_PATH=trans_agents.db

# Audio Settings
SAMPLE_RATE=16000
MIN_CHUNK_DURATION=4
```

### What You Need to Provide:
- **OPENAI_API_KEY**: Replace `your_openai_api_key_here` with your actual OpenAI API key. This is required for the transcription service to function. You can obtain one from [OpenAI's website](https://platform.openai.com/).
- *(Optional)* Adjust other settings like `SAMPLE_RATE` or `MIN_CHUNK_DURATION` if needed, though the defaults should work for most cases.

After editing the `.env` file, press **Enter** when prompted by the script to proceed with the deployment.

## Requirements

To run this application, ensure your system has:
- **Docker**: For containerization.
- **Docker Compose**: For managing the frontend and backend services.
- **OpenAI API Key**: For transcription functionality.

No manual installation of Python, Node.js, or other dependencies is required, as Docker handles everything.

## How It Works

### Frontend
- Click the "Start Recording" button.
- Grant microphone access when prompted by the browser.
- Chose either microphone or system (it is like when you share your screen, use the tab where the meeting is)
- Audio is captured, split into chunks, and sent to the backend.
- Transcriptions appear in real-time on the interface.

### Backend
- Receives audio chunks via API endpoints.
- Transcribes them using the KBLab/kb-whisper models.
- Stores transcriptions in a database.
- Periodically processes transcriptions with agents.

## API Endpoints

- **`POST /start_session/{meeting_id}`**: Starts a new transcription session.
- **`POST /transcribe/{meeting_id}`**: Processes and transcribes an audio chunk.
- **`POST /end_session`**: Ends the current transcription session.

## Files Structure

### Backend
- `api.py`: FastAPI server with endpoints.
- `audio_transcribe.py`: Manages audio transcription with the ML model.
- `constants.py`: Configuration constants.

### Frontend
- `index.html`: HTML entry point.
- `index.jsx`: React entry point.
- `App.jsx`: Main React component.
- `AudioRecorder.jsx`: Handles audio recording and transmission.
- `App.css`: Application styling.

## Troubleshooting

### Microphone Access
- Ensure your browser has microphone permissions.
- Use HTTPS in production (localhost works in development).

### Audio Quality
- Minimize background noise.
- Speak clearly and consistently.
- Adjust `MIN_CHUNK_DURATION` in the `.env` file if chunks are too short or long.

### Service Issues
- If the script reports issues, check logs with:
  ```bash
  docker-compose logs
  ```
- Verify Docker is running and the `.env` file is correctly configured.

---
----- End output of README.md -----

cat backend/Dockerfile
----- Begin output of backend/Dockerfile -----
# Use CUDA-enabled base image
FROM nvidia/cuda:12.2.0-runtime-ubuntu22.04

# Set working directory
WORKDIR /app

# Install Python 3.11.9 and other dependencies
RUN apt-get update && apt-get install -y --no-install-recommends \
    build-essential \
    wget \
    libssl-dev \
    zlib1g-dev \
    libffi-dev \
    libsqlite3-dev \
    curl \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*

# Install specific Python version with ctypes and sqlite support
RUN wget https://www.python.org/ftp/python/3.11.9/Python-3.11.9.tgz \
    && tar -xzf Python-3.11.9.tgz \
    && cd Python-3.11.9 \
    && ./configure --enable-optimizations --with-system-ffi --enable-loadable-sqlite-extensions \
    && make -j$(nproc) \
    && make install \
    && cd .. \
    && rm -rf Python-3.11.9*

# Install uv using the official install script with UV_INSTALL_DIR
RUN curl -LsSf https://astral.sh/uv/install.sh | UV_INSTALL_DIR=/usr/local/bin sh \
    && /usr/local/bin/uv --version

# Copy pyproject.toml
COPY pyproject.toml .

# Generate requirements.txt from pyproject.toml and add python-dotenv
RUN /usr/local/bin/uv pip compile pyproject.toml -o requirements.txt \
    && echo "python-dotenv" >> requirements.txt

# Install dependencies with uv into the system environment
RUN /usr/local/bin/uv pip install --system --no-cache-dir -r requirements.txt

# Copy application code
COPY . .

# Expose API port
EXPOSE 8000

# Command to run the application
CMD ["uvicorn", "api:app", "--host", "0.0.0.0", "--port", "8000"]----- End output of backend/Dockerfile -----

cat backend/agents/test_agents.py
----- Begin output of backend/agents/test_agents.py -----
"""
Test script for the Six Thinking Hats agent system.

This script tests the hat_agents and processor modules by processing a sample transcript.
"""
import sys
import os
import time
from typing import Dict, Any

# Add the project root to the path if running this script directly
sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), '..')))

# Import the agent modules
from agents.hat_agents import get_all_agents
from database import Session, AgentOutput, Meeting, save_agent_output_to_db


def test_hat_agents():
    """Test the hat agents with a sample transcript."""
    # Sample agenda and previous meetings summary
    test_agenda = "Diskussion om projektets framtid"
    test_previous_meetings = "Tidigare mte: Projektstart och tilldelning av uppgifter"
    
    # Get all agents
    agents = get_all_agents(test_agenda, test_previous_meetings)
    
    print(f"Successfully created {len(agents)} agents:")
    for agent_name in agents:
        print(f"- {agent_name}")
    
    # Sample transcript (in Swedish)
    sample_transcript = """
    Hej allihopa och vlkomna till dagens mte. Idag ska vi prata om de nya funktionerna 
    i vrt system. Vi behver bestmma vilka funktioner som ska prioriteras i nsta sprint. 
    Sara freslr att vi fokuserar p anvndargrnssnittet, medan Johan tror att 
    prestandaoptimering r viktigare just nu. Vad tycker ni andra?
    """
    
    # Process the transcript with each agent
    print("\nTesting agents with sample transcript...")
    results = {}
    
    for agent_name, agent in agents.items():
        print(f"\nProcessing with {agent_name}...")
        try:
            output = agent.run(sample_transcript)
            results[agent_name] = output
            print(f"Output from {agent_name}: {output[:100]}...")  # Print first 100 chars
        except Exception as e:
            print(f"Error processing with {agent_name}: {e}")
    
    return results


def test_agent_processor():
    """Test the agent processor by creating a test meeting and processing a transcript."""
    from agents.processor import AgentProcessor
    
    try:
        # Create a test meeting in the database
        session = Session()
        test_meeting = Meeting(
            start_time=time.strftime('%Y-%m-%d %H:%M:%S'),
            title="Test Meeting",
            agenda="Test agenda for agent processor"
        )
        session.add(test_meeting)
        session.commit()
        test_meeting_id = test_meeting.id
        
        print(f"\nCreated test meeting with ID: {test_meeting_id}")
        
        # Create an agent processor for the test meeting
        processor = AgentProcessor(test_meeting_id)
        
        # Sample transcript
        sample_transcript = """
        Hej allihopa och vlkomna till dagens testmte. Vi testar vrt nya system med 
        sex thinking hats-metoden. Lt oss se hur det fungerar med denna testtext.
        """
        
        # Process the transcript
        print("Processing transcript with agent processor...")
        outputs = processor.process_transcript(sample_transcript)
        
        print(f"Processed transcript through {len(outputs)} agents:")
        for agent_name, output in outputs.items():
            print(f"- {agent_name}: {output[:50]}...")  # Print first 50 chars
        
        # Clean up test data
        print("\nCleaning up test data...")
        session.query(AgentOutput).filter(AgentOutput.meeting_id == test_meeting_id).delete()
        session.query(Meeting).filter(Meeting.id == test_meeting_id).delete()
        session.commit()
        
        print("Test completed successfully!")
        return True
        
    except Exception as e:
        print(f"Error in test_agent_processor: {e}")
        return False
    finally:
        session.close()


if __name__ == "__main__":
    print("=== TESTING SIX THINKING HATS AGENT SYSTEM ===\n")
    
    # Test hat agents
    print("=== TESTING HAT AGENTS ===")
    hat_results = test_hat_agents()
    
    # Uncomment to test agent processor with database
    # print("\n=== TESTING AGENT PROCESSOR ===")
    # processor_result = test_agent_processor()----- End output of backend/agents/test_agents.py -----

cat backend/agents/__init__.py
----- Begin output of backend/agents/__init__.py -----
# Agents package for the A-Trans system
# This package contains agent implementations based on the Six Thinking Hats methodology----- End output of backend/agents/__init__.py -----

cat backend/agents/hat_agents.py
----- Begin output of backend/agents/hat_agents.py -----
"""
Six Thinking Hats Agents for A-Trans system

This module defines the agent configurations for the six thinking hats methodology:
- White Hat: Data Provider (facts, objective information)
- Red Hat: Mood Lifter (emotions, humor)
- Black Hat: Risk Identifier (caution, problems)
- Yellow Hat: Optimism Promoter (benefits, positive aspects)
- Green Hat: Idea Generator (creativity, alternatives)
- Blue Hat: Value Gatekeeper (process control, evaluation)

All agents use the OpenAI GPT-4o model and process Swedish transcriptions.
"""
import os
from dotenv import load_dotenv
from agno.agent import Agent
from agno.models.openai import OpenAIChat
from typing import Dict, List, Optional

# Load environment variables from .env file
load_dotenv()


def get_white_hat(agenda: Optional[str] = None, previous_meetings_summary: Optional[str] = None) -> Agent:
    """White Hat: Data Provider - Gathers and presents objective, factual information."""
    additional_context = _build_additional_context(agenda, previous_meetings_summary)
    return Agent(
        model=OpenAIChat(id="gpt-4o"),
        description="You are an expert data provider, focused on delivering objective facts and information relevant to the meeting.",
        instructions=[
            "Samla och presentera saklig information frn mtesavskriften, ssom datum, statistik och projektuppdateringar.",
            "Skerstll att informationen r korrekt och relevant fr diskussionen.",
            "Ge korta sammanfattningar av det aktuella lget fr att underltta beslutsfattande."
        ],
        additional_context=additional_context,
        markdown=True,
        debug_mode=False
    )


def get_red_hat(agenda: Optional[str] = None, previous_meetings_summary: Optional[str] = None) -> Agent:
    """Red Hat: Mood Lifter - Lightens the mood with a joke and keywords."""
    additional_context = _build_additional_context(agenda, previous_meetings_summary)
    return Agent(
        model=OpenAIChat(id="gpt-4o"),
        description="You are a mood lifter, tasked with lightening the atmosphere of the meeting.",
        instructions=[
            "Skapa ett kort, roligt skmt baserat p mtets innehll fr att ltta upp stmningen.",
            "Sammanfatta mtet med ngra nyckelord som kan anvndas fr en humoristisk visuell recap.",
            "Anvnd sprkanalys fr att identifiera teman fr skmtet och nyckelorden."
        ],
        additional_context=additional_context,
        markdown=True,
        debug_mode=False
    )


def get_black_hat(agenda: Optional[str] = None, previous_meetings_summary: Optional[str] = None) -> Agent:
    """Black Hat: Risk Identifier - Pinpoints potential risks and challenges."""
    additional_context = _build_additional_context(agenda, previous_meetings_summary)
    return Agent(
        model=OpenAIChat(id="gpt-4o"),
        description="You are a risk identifier, focused on pinpointing potential risks and challenges in the meeting discussion.",
        instructions=[
            "Utvrdera mtesavskriften fr att identifiera potentiella risker, utmaningar eller svagheter i freslagna ider.",
            "Anvnd dataanalys och mnsterigenknning fr att flagga problem som kan frbises.",
            "Ge kritisk terkoppling fr att skerstlla att problem hanteras."
        ],
        additional_context=additional_context,
        markdown=True,
        debug_mode=False
    )


def get_yellow_hat(agenda: Optional[str] = None, previous_meetings_summary: Optional[str] = None) -> Agent:
    """Yellow Hat: Optimism Promoter - Highlights positive aspects and opportunities."""
    additional_context = _build_additional_context(agenda, previous_meetings_summary)
    return Agent(
        model=OpenAIChat(id="gpt-4o"),
        description="You are an optimism promoter, highlighting the positive aspects and opportunities in the meeting discussion.",
        instructions=[
            "Identifiera och betona frdelar, positiva aspekter och mjligheter med ider som tas upp i mtet.",
            "Std din optimism med logisk resonemang eller historisk data nr det r mjligt.",
            "Uppmuntra teamet att fokusera p potentiella framgngar."
        ],
        additional_context=additional_context,
        markdown=True,
        debug_mode=False
    )


def get_green_hat(agenda: Optional[str] = None, previous_meetings_summary: Optional[str] = None) -> Agent:
    """Green Hat: Idea Generator - Proposes creative solutions and innovative ideas."""
    additional_context = _build_additional_context(agenda, previous_meetings_summary)
    return Agent(
        model=OpenAIChat(id="gpt-4o"),
        description="You are an idea generator, proposing creative solutions and innovative ideas based on the meeting content.",
        instructions=[
            "Fresl kreativa lsningar, alternativa tillvgagngsstt eller innovativa ider baserat p mtesdiskussionen.",
            "Utnyttja generativa AI-frmgor fr att fresl nya strategier eller kombinationer.",
            "Inspirera teamet att utforska nya mjligheter."
        ],
        additional_context=additional_context,
        markdown=True,
        debug_mode=False
    )


def get_blue_hat(agenda: Optional[str] = None, previous_meetings_summary: Optional[str] = None) -> Agent:
    """Blue Hat: Value Gatekeeper - Reviews outputs and selects valuable insights."""
    additional_context = _build_additional_context(agenda, previous_meetings_summary)
    return Agent(
        model=OpenAIChat(id="gpt-4o"),
        description="You are a value gatekeeper, responsible for reviewing and selecting valuable insights from the meeting for storage.",
        instructions=[
            "Granska utdata frn de andra agenterna (Vit, Rd, Svart, Gul, Grn Hatt) som ges i indata.",
            "Avgr vilka insikter som tillfr vrde till mtet baserat p kriterier som relevans, unikhet och framtida anvndbarhet.",
            "Sammanfatta de viktigaste slutsatserna och skerstll att databasen frblir fokuserad genom att vlja endast de mest vrdefulla bidragen."
        ],
        additional_context=additional_context,
        markdown=True,
        debug_mode=False
    )


def _build_additional_context(agenda: Optional[str], previous_meetings_summary: Optional[str]) -> str:
    """Build the additional context string for agents."""
    agenda_str = f"Meeting Agenda: {agenda}" if agenda else "Meeting Agenda: Not specified"
    meetings_str = f"Previous Meetings: {previous_meetings_summary}" if previous_meetings_summary else "Previous Meetings: None available"
    return f"{agenda_str}\n{meetings_str}"


def get_all_agents(agenda: Optional[str] = None, previous_meetings_summary: Optional[str] = None) -> Dict[str, Agent]:
    """Get all six thinking hat agents with the specified agenda and previous meetings summary."""
    return {
        "white_hat": get_white_hat(agenda, previous_meetings_summary),
        "red_hat": get_red_hat(agenda, previous_meetings_summary),
        "black_hat": get_black_hat(agenda, previous_meetings_summary),
        "yellow_hat": get_yellow_hat(agenda, previous_meetings_summary),
        "green_hat": get_green_hat(agenda, previous_meetings_summary),
        "blue_hat": get_blue_hat(agenda, previous_meetings_summary)
    }----- End output of backend/agents/hat_agents.py -----

cat backend/agents/processor.py
----- Begin output of backend/agents/processor.py -----
"""
Agent Processor Module for A-Trans system

This module handles the processing of transcription data through the agents
and saving the agent outputs to the database.
"""
import time
import os
from typing import Dict, List, Optional, Any
from datetime import datetime
from dotenv import load_dotenv

# Load environment variables from .env file
load_dotenv()

from agno.agent import Agent
from sqlalchemy.orm import Session
from sqlalchemy import text

from agents.hat_agents import get_all_agents
from database import Session as DBSession, AgentOutput, Meeting


class AgentProcessor:
    """Processes transcription data through the Six Thinking Hats agents and saves outputs to database."""
    
    def __init__(self, meeting_id: int):
        """Initialize the agent processor for a specific meeting."""
        self.meeting_id = meeting_id
        self.agents: Dict[str, Agent] = {}
        self.initialize_agents()
        
    def initialize_agents(self):
        """Initialize the agents with meeting agenda and previous meetings summary."""
        # Fetch meeting agenda and previous meetings summary from database
        session = DBSession()
        try:
            meeting = session.query(Meeting).filter(Meeting.id == self.meeting_id).first()
            
            # Get agenda from current meeting
            agenda = meeting.agenda if meeting else None
            
            # Get previous meetings summary (simplified implementation)
            # In a full implementation, you might want to fetch and summarize previous meetings
            previous_meetings_summary = self._get_previous_meetings_summary(session)
            
            # Initialize the agents
            self.agents = get_all_agents(agenda, previous_meetings_summary)
            
        except Exception as e:
            print(f"Error initializing agents: {e}")
        finally:
            session.close()
    
    def _get_previous_meetings_summary(self, session: Session) -> Optional[str]:
        """Get summary of previous meetings related to the current meeting."""
        # This is a simplified implementation
        # In a real-world scenario, you might want to implement a more sophisticated logic
        try:
            # Get meeting relations
            meeting_relations = session.execute(
                text("""
                SELECT m.title, m.id
                FROM meetings m
                JOIN meeting_relations mr ON m.id = mr.previous_meeting_id
                WHERE mr.meeting_id = :meeting_id
                """),
                {"meeting_id": self.meeting_id}
            ).fetchall()
            
            if not meeting_relations:
                return None
                
            # Create a simple summary
            meetings_info = [f"Meeting {rel[0]} (ID: {rel[1]})" for rel in meeting_relations]
            return "Previous related meetings: " + ", ".join(meetings_info)
            
        except Exception as e:
            print(f"Error getting previous meetings summary: {e}")
            return None
    
    def process_transcript(self, transcript_text: str) -> Dict[str, Any]:
        """
        Process the transcript through the agents and save outputs to database.
        
        Args:
            transcript_text: The transcript text to process
            
        Returns:
            Dictionary with agent outputs
        """
        agent_outputs = {}
        
        # Process transcript through each agent except Blue Hat
        for agent_name, agent in self.agents.items():
            if agent_name != "blue_hat":  # Blue Hat processes other agents' outputs
                try:
                    print(f"Processing transcript with {agent_name}...")
                    output = agent.run(transcript_text)
                    agent_outputs[agent_name] = output
                    self._save_agent_output(agent_name, output)
                except Exception as e:
                    print(f"Error processing transcript with {agent_name}: {e}")
                    agent_outputs[agent_name] = f"Error: {str(e)}"
        
        # Process all outputs through Blue Hat
        try:
            if "blue_hat" in self.agents:
                blue_hat_input = self._format_outputs_for_blue_hat(agent_outputs)
                blue_hat_output = self.agents["blue_hat"].run(blue_hat_input)
                agent_outputs["blue_hat"] = blue_hat_output
                self._save_agent_output("blue_hat", blue_hat_output)
        except Exception as e:
            print(f"Error processing outputs with blue_hat: {e}")
            agent_outputs["blue_hat"] = f"Error: {str(e)}"
        
        return agent_outputs
    
    def _format_outputs_for_blue_hat(self, agent_outputs: Dict[str, Any]) -> str:
        """Format the outputs from other agents for the Blue Hat."""
        formatted_output = "Outputs from other agents:\n\n"
        
        for agent_name, output in agent_outputs.items():
            # Translate agent name to Swedish
            agent_name_swedish = {
                "white_hat": "Vit Hatt",
                "red_hat": "Rd Hatt",
                "black_hat": "Svart Hatt",
                "yellow_hat": "Gul Hatt",
                "green_hat": "Grn Hatt"
            }.get(agent_name, agent_name)
            
            # Extract content from RunResponse if needed
            content = output.content if hasattr(output, 'content') else str(output)
            
            formatted_output += f"## {agent_name_swedish}\n{content}\n\n"
            
        return formatted_output
    
    def _save_agent_output(self, agent_name: str, output_text) -> None:
        """Save the agent output to the database."""
        try:
            session = DBSession()
            
            # Map agent_name to agent_id
            agent_id_map = {
                "white_hat": 1,
                "red_hat": 2,
                "black_hat": 3,
                "yellow_hat": 4,
                "green_hat": 5,
                "blue_hat": 6
            }
            
            # Map agent_name to human-readable name
            agent_display_name = {
                "white_hat": "Data Provider",
                "red_hat": "Mood Lifter",
                "black_hat": "Risk Identifier",
                "yellow_hat": "Optimism Promoter",
                "green_hat": "Idea Generator",
                "blue_hat": "Value Gatekeeper"
            }
            
            # Extract content from RunResponse if needed
            content = output_text.content if hasattr(output_text, 'content') else str(output_text)
            
            agent_output = AgentOutput(
                meeting_id=self.meeting_id,
                agent_id=agent_id_map.get(agent_name, 0),
                agent_name=agent_display_name.get(agent_name, agent_name),
                output_text=content,
                timestamp=datetime.now()
            )
            
            session.add(agent_output)
            session.commit()
            print(f"Output from {agent_name} saved to database.")
            
        except Exception as e:
            print(f"Error saving agent output to database: {e}")
        finally:
            session.close()


def process_latest_transcript(meeting_id: int) -> Dict[str, Any]:
    """
    Process the latest transcript for a meeting through the agents.
    
    Args:
        meeting_id: The ID of the meeting
        
    Returns:
        Dictionary with agent outputs
    """
    # Get the latest transcript from the database
    session = DBSession()
    try:
        # Get all transcripts for the meeting
        result = session.execute(
            text("""
            SELECT text FROM transcripts
            WHERE meeting_id = :meeting_id
            ORDER BY timestamp DESC
            """),
            {"meeting_id": meeting_id}
        ).fetchall()
        
        if not result:
            print(f"No transcripts found for meeting ID: {meeting_id}")
            return {}
        
        # Combine all transcripts
        transcript_text = " ".join([row[0] for row in result])
        
        # Process the transcript through the agents
        processor = AgentProcessor(meeting_id)
        return processor.process_transcript(transcript_text)
        
    except Exception as e:
        print(f"Error processing latest transcript: {e}")
        return {}
    finally:
        session.close()----- End output of backend/agents/processor.py -----

cat backend/agents/__pycache__/__init__.cpython-311.pyc
----- Begin output of backend/agents/__pycache__/__init__.cpython-311.pyc -----

    g                          d S )N r       /app/agents/__init__.py<module>r      s     r   ----- End output of backend/agents/__pycache__/__init__.cpython-311.pyc -----

cat backend/agents/__pycache__/processor.cpython-311.pyc
----- Begin output of backend/agents/__pycache__/processor.cpython-311.pyc -----

    g                          d Z ddlZddlZddlmZmZmZmZ ddlmZ ddl	m
Z
  e
             ddlmZ ddlmZ ddlmZ dd	lmZ dd
lmZmZmZ  G d d          Zdedeeef         fdZdS )z
Agent Processor Module for A-Trans system

This module handles the processing of transcription data through the agents
and saving the agent outputs to the database.
    N)DictListOptionalAny)datetime)load_dotenv)Agent)Session)text)get_all_agents)r
   AgentOutputMeetingc                       e Zd ZdZdefdZd Zdedee	         fdZ
de	dee	ef         fd	Zd
ee	ef         de	fdZde	ddfdZdS )AgentProcessorz`Processes transcription data through the Six Thinking Hats agents and saves outputs to database.
meeting_idc                 J    || _         i | _        |                                  dS )z6Initialize the agent processor for a specific meeting.N)r   agentsinitialize_agents)selfr   s     /app/agents/processor.py__init__zAgentProcessor.__init__   s(    $(*         c                    t                      }	 |                    t                                        t          j        | j        k                                              }|r|j        nd}|                     |          }t          ||          | _
        n)# t          $ r}t          d|            Y d}~nd}~ww xY w|                                 dS # |                                 w xY w)zHInitialize the agents with meeting agenda and previous meetings summary.NzError initializing agents: )	DBSessionqueryr   filteridr   firstagenda_get_previous_meetings_summaryr   r   	Exceptionprintclose)r   sessionmeetingr   previous_meetings_summaryes         r   r   z AgentProcessor.initialize_agents!   s     ++	mmG,,33GJ$/4QRRXXZZG (/8W^^DF )-(K(KG(T(T% )1JKKDKK 	5 	5 	533344444444	5 MMOOOOOGMMOOOOs0   BB C 
B>"B94C 9B>>C C-r$   returnc                     	 |                     t          d          d| j        i                                          }|sdS d |D             }dd                    |          z   S # t
          $ r}t          d|            Y d}~dS d}~ww xY w)z@Get summary of previous meetings related to the current meeting.z
                SELECT m.title, m.id
                FROM meetings m
                JOIN meeting_relations mr ON m.id = mr.previous_meeting_id
                WHERE mr.meeting_id = :meeting_id
                r   Nc                 8    g | ]}d |d          d|d          dS )zMeeting r   z (ID:    ) ).0rels     r   
<listcomp>zAAgentProcessor._get_previous_meetings_summary.<locals>.<listcomp>K   s4    ]]]C?A??c!f???]]]r   zPrevious related meetings: z, z)Error getting previous meetings summary: )executer   r   fetchalljoinr!   r"   )r   r$   meeting_relationsmeetings_infor'   s        r   r    z-AgentProcessor._get_previous_meetings_summary7   s    	 '    t/! ! hjj  % t ^]K\]]]M0499]3K3KKK 	 	 	AaAABBB44444	s   >A& #A& &
B0BBtranscript_textc                    i }| j                                         D ]\  }}|dk    r	 t          d| d           |                    |          }|||<   |                     ||           P# t
          $ r4}t          d| d|            dt          |           ||<   Y d}~d}~ww xY w	 d| j         v rP|                     |          }| j         d                             |          }||d<   |                     d|           n># t
          $ r1}t          d|            dt          |           |d<   Y d}~nd}~ww xY w|S )	z
        Process the transcript through the agents and save outputs to database.
        
        Args:
            transcript_text: The transcript text to process
            
        Returns:
            Dictionary with agent outputs
        blue_hatzProcessing transcript with z...z!Error processing transcript with z: zError: Nz(Error processing outputs with blue_hat: )r   itemsr"   run_save_agent_outputr!   str_format_outputs_for_blue_hat)	r   r6   agent_outputs
agent_nameagentoutputr'   blue_hat_inputblue_hat_outputs	            r   process_transcriptz!AgentProcessor.process_transcriptR   s     "&!2!2!4!4 		C 		CJZ''CG
GGGHHH"YY77F06M*-++J????  C C COjOOAOOPPP0B#a&&0B0BM*------C (	;T[((!%!B!B=!Q!Q"&+j"9"="=n"M"M,;j)''
ODDD 	; 	; 	;@Q@@AAA(:#a&&(:(:M*%%%%%%	; s1   AA,,
B*6*B%%B*/AD	 	
E'D??Er>   c                     d}|                                 D ]S\  }}dddddd                    ||          }t          |d          r|j        nt	          |          }|d	| d
| dz  }T|S )z6Format the outputs from other agents for the Blue Hat.zOutputs from other agents:

zVit Hattu	   Rd Hattz
Svart HattzGul Hattu
   Grn Hatt)	white_hatred_hat	black_hat
yellow_hat	green_hatcontentz## 
z

)r9   gethasattrrK   r<   )r   r>   formatted_outputr?   rA   agent_name_swedishrK   s          r   r=   z+AgentProcessor._format_outputs_for_blue_hatw   s    ;"/"5"5"7"7 	J 	JJ (&)()" " c*j))  )0	(B(BSfnnFG I&8 I IG I I IIr   r?   Nc                 ^   	 t                      }ddddddd}dd	d
dddd}t          |d          r|j        nt          |          }t	          | j        |                    |d          |                    ||          |t          j                              }|	                    |           |
                                 t          d| d           n)# t          $ r}t          d|            Y d}~nd}~ww xY w|                                 dS # |                                 w xY w)z&Save the agent output to the database.r+                  )rF   rG   rH   rI   rJ   r8   zData ProviderzMood LifterzRisk IdentifierzOptimism PromoterzIdea GeneratorzValue GatekeeperrK   r   )r   agent_idr?   output_text	timestampzOutput from z saved to database.z'Error saving agent output to database: N)r   rN   rK   r<   r   r   rM   r   nowaddcommitr"   r!   r#   )	r   r?   rX   r$   agent_id_mapagent_display_namerK   agent_outputr'   s	            r   r;   z!AgentProcessor._save_agent_output   ss   )	kkG  L -(.1-." " .5[)-L-Lbk))RUVaRbRbG&?%))*a88-11*jII#",..  L KK%%%NN@@@@AAAA 	A 	A 	A?A??@@@@@@@@	A MMOOOOOGMMOOOOs0   CC D 
C=!C83D 8C==D D,)__name__
__module____qualname____doc__intr   r   r
   r   r<   r    r   r   rD   r=   r;   r-   r   r   r   r      s        jj!3 ! ! ! !  ,g (3-    6## #$sCx. # # # #J $sCx.  S        *+S +$ + + + + + +r   r   r   r(   c                 @   t                      }	 |                    t          d          d| i                                          }|s(t	          d|             i |                                 S d                    d |D                       }t          |           }|                    |          |                                 S # t          $ r2}t	          d|            i cY d}~|                                 S d}~ww xY w# |                                 w xY w)z
    Process the latest transcript for a meeting through the agents.
    
    Args:
        meeting_id: The ID of the meeting
        
    Returns:
        Dictionary with agent outputs
    z
            SELECT text FROM transcripts
            WHERE meeting_id = :meeting_id
            ORDER BY timestamp DESC
            r   z%No transcripts found for meeting ID:  c                     g | ]
}|d          S )r   r-   )r.   rows     r   r0   z-process_latest_transcript.<locals>.<listcomp>   s    #=#=#=sCF#=#=#=r   z$Error processing latest transcript: N)
r   r1   r   r2   r"   r#   r3   r   rD   r!   )r   r$   resultr6   	processorr'   s         r   process_latest_transcriptrk      s@    kkG   
 :&
 
 (** 	  	F*FFGGG 	 ((#=#=f#=#=#=>> #:..	++O<< 		    8Q88999						 	s7   AC 1AC 
DC?%D&D ?DD D)rc   timeostypingr   r   r   r   r   dotenvr   
agno.agentr	   sqlalchemy.ormr
   
sqlalchemyr   agents.hat_agentsr   databaser   r   r   r   rd   r<   rk   r-   r   r   <module>ru      sC     				 , , , , , , , , , , , ,                    " " " " " "       , , , , , , ? ? ? ? ? ? ? ? ? ?_ _ _ _ _ _ _ _D&# &$sCx. & & & & & &r   ----- End output of backend/agents/__pycache__/processor.cpython-311.pyc -----

cat backend/agents/__pycache__/hat_agents.cpython-311.pyc
----- Begin output of backend/agents/__pycache__/hat_agents.cpython-311.pyc -----

    g              	          d Z ddlZddlmZ ddlmZ ddlmZ ddlm	Z	m
Z
mZ  e             ddee         dee         d	efd
Zddee         dee         d	efdZddee         dee         d	efdZddee         dee         d	efdZddee         dee         d	efdZddee         dee         d	efdZdee         dee         d	efdZddee         dee         d	e	eef         fdZdS )a  
Six Thinking Hats Agents for A-Trans system

This module defines the agent configurations for the six thinking hats methodology:
- White Hat: Data Provider (facts, objective information)
- Red Hat: Mood Lifter (emotions, humor)
- Black Hat: Risk Identifier (caution, problems)
- Yellow Hat: Optimism Promoter (benefits, positive aspects)
- Green Hat: Idea Generator (creativity, alternatives)
- Blue Hat: Value Gatekeeper (process control, evaluation)

All agents use the OpenAI GPT-4o model and process Swedish transcriptions.
    N)load_dotenv)Agent)
OpenAIChat)DictListOptionalagendaprevious_meetings_summaryreturnc                 l    t          | |          }t          t          d          dg d|dd          S )zOWhite Hat: Data Provider - Gathers and presents objective, factual information.gpt-4oidzoYou are an expert data provider, focused on delivering objective facts and information relevant to the meeting.)uq   Samla och presentera saklig information frn mtesavskriften, ssom datum, statistik och projektuppdateringar.uJ   Skerstll att informationen r korrekt och relevant fr diskussionen.uV   Ge korta sammanfattningar av det aktuella lget fr att underltta beslutsfattande.TFmodeldescriptioninstructionsadditional_contextmarkdown
debug_mode_build_additional_contextr   r   r	   r
   r   s      /app/agents/hat_agents.pyget_white_hatr      sX    26;TUUH%%% F
 
 

 .       c                 l    t          | |          }t          t          d          dg d|dd          S )zBRed Hat: Mood Lifter - Lightens the mood with a joke and keywords.r   r   zLYou are a mood lifter, tasked with lightening the atmosphere of the meeting.)u\   Skapa ett kort, roligt skmt baserat p mtets innehll fr att ltta upp stmningen.u\   Sammanfatta mtet med ngra nyckelord som kan anvndas fr en humoristisk visuell recap.uN   Anvnd sprkanalys fr att identifiera teman fr skmtet och nyckelorden.TFr   r   r   s      r   get_red_hatr   )   sU    26;TUUH%%%b
 
 

 .   r   c                 l    t          | |          }t          t          d          dg d|dd          S )zFBlack Hat: Risk Identifier - Pinpoints potential risks and challenges.r   r   zkYou are a risk identifier, focused on pinpointing potential risks and challenges in the meeting discussion.)uu   Utvrdera mtesavskriften fr att identifiera potentiella risker, utmaningar eller svagheter i freslagna ider.uV   Anvnd dataanalys och mnsterigenknning fr att flagga problem som kan frbises.uE   Ge kritisk terkoppling fr att skerstlla att problem hanteras.TFr   r   r   s      r   get_black_hatr    :   sX    26;TUUH%%% B
 
 

 .   r   c                 l    t          | |          }t          t          d          dg d|dd          S )zNYellow Hat: Optimism Promoter - Highlights positive aspects and opportunities.r   r   zlYou are an optimism promoter, highlighting the positive aspects and opportunities in the meeting discussion.)ue   Identifiera och betona frdelar, positiva aspekter och mjligheter med ider som tas upp i mtet.uT   Std din optimism med logisk resonemang eller historisk data nr det r mjligt.u:   Uppmuntra teamet att fokusera p potentiella framgngar.TFr   r   r   s      r   get_yellow_hatr"   K   sX    26;TUUH%%% C
 
 

 .   r   c                 l    t          | |          }t          t          d          dg d|dd          S )zMGreen Hat: Idea Generator - Proposes creative solutions and innovative ideas.r   r   zjYou are an idea generator, proposing creative solutions and innovative ideas based on the meeting content.)uw   Fresl kreativa lsningar, alternativa tillvgagngsstt eller innovativa ider baserat p mtesdiskussionen.uX   Utnyttja generativa AI-frmgor fr att fresl nya strategier eller kombinationer.u/   Inspirera teamet att utforska nya mjligheter.TFr   r   r   s      r   get_green_hatr$   \   sX    26;TUUH%%% A
 
 

 .   r   c                 l    t          | |          }t          t          d          dg d|dd          S )zKBlue Hat: Value Gatekeeper - Reviews outputs and selects valuable insights.r   r   zsYou are a value gatekeeper, responsible for reviewing and selecting valuable insights from the meeting for storage.)u]   Granska utdata frn de andra agenterna (Vit, Rd, Svart, Gul, Grn Hatt) som ges i indata.u}   Avgr vilka insikter som tillfr vrde till mtet baserat p kriterier som relevans, unikhet och framtida anvndbarhet.u   Sammanfatta de viktigaste slutsatserna och skerstll att databasen frblir fokuserad genom att vlja endast de mest vrdefulla bidragen.TFr   r   r   s      r   get_blue_hatr&   m   sX    26;TUUH%%% J
 
 

 .   r   c                 4    | rd|  nd}|rd| nd}| d| S )z/Build the additional context string for agents.zMeeting Agenda: zMeeting Agenda: Not specifiedzPrevious Meetings: z!Previous Meetings: None available
 )r	   r
   
agenda_strmeetings_strs       r   r   r   ~   sP    06[,F,,,<[JHa  KD)BDDD  hKL**L***r   c           	          t          | |          t          | |          t          | |          t          | |          t	          | |          t          | |          dS )zXGet all six thinking hat agents with the specified agenda and previous meetings summary.)	white_hatred_hat	black_hat
yellow_hat	green_hatblue_hat)r   r   r    r"   r$   r&   )r	   r
   s     r   get_all_agentsr3      sg     #6+DEEv'@AA"6+DEE$V-FGG"6+DEE )BCC  r   )NN)__doc__osdotenvr   
agno.agentr   agno.models.openair   typingr   r   r   strr   r   r    r"   r$   r&   r   r3   r)   r   r   <module>r;      sN    
			             ) ) ) ) ) ) ' ' ' ' ' ' ' ' ' '  (3- 8TW= di    "  RU bg    " (3- 8TW= di    " 8C= HUXM ej    " (3- 8TW= di    " # (SV- ch    "+hsm +PXY\P] +be + + + +	 	8C= 	HUXM 	eijmotjteu 	 	 	 	 	 	r   ----- End output of backend/agents/__pycache__/hat_agents.cpython-311.pyc -----

cat backend/agents/README.md
----- Begin output of backend/agents/README.md -----
# Six Thinking Hats Agent System

This folder contains the implementation of the Six Thinking Hats agent system for the A-Trans transcription platform.

## Overview

The Six Thinking Hats methodology, developed by Edward de Bono, is a system that encourages parallel thinking and helps teams analyze situations from different perspectives. This implementation uses AI agents to automatically process meeting transcriptions and provide insights from each "hat" perspective.

## Hat Roles

1. **White Hat (Data Provider)**
   - Focuses on objective facts and information
   - Presents data without interpretation
   - Identifies what information is available or missing

2. **Red Hat (Mood Lifter)**
   - Addresses emotions and feelings
   - Provides humorous content to lighten the atmosphere
   - Creates visual recap keywords for the meeting

3. **Black Hat (Risk Identifier)**
   - Identifies potential risks, problems, and obstacles
   - Points out logical flaws or weaknesses
   - Helps with critical thinking and devil's advocacy

4. **Yellow Hat (Optimism Promoter)**
   - Focuses on benefits and positive aspects
   - Highlights opportunities and advantages
   - Provides constructive optimism

5. **Green Hat (Idea Generator)**
   - Offers creative solutions and alternatives
   - Suggests new approaches and innovations
   - Encourages thinking outside the box

6. **Blue Hat (Value Gatekeeper)**
   - Manages the thinking process
   - Evaluates contributions from other hats
   - Distills valuable insights and summarizes conclusions

## Implementation Details

The agent system is implemented across several files:

- `hat_agents.py`: Defines the configuration for each of the six thinking hat agents
- `processor.py`: Handles processing transcription data through the agents and saving outputs to the database
- `test_agents.py`: Contains test functions to verify the agent system functionality

## How It Works

1. The system captures audio from meetings and transcribes it using a speech recognition model.
2. Transcribed text is saved to the database.
3. Periodically (every 10 seconds), the agent processor fetches the latest transcript and processes it through each of the five primary thinking hat agents (White, Red, Black, Yellow, and Green).
4. The outputs from these agents are then processed by the Blue Hat agent, which evaluates and selects the most valuable insights.
5. All agent outputs are stored in the database and displayed in the Streamlit interface.

## Usage

The agent system is integrated with the transcription pipeline and runs automatically when a meeting is in progress. The output from each agent is displayed in the Streamlit interface under the "Thinking Hats Insights" section.

To manually test the agent system, you can run:

```bash
python -m agents.test_agents
```

## Dependencies

- agno: Framework for creating and managing AI agents
- OpenAI's GPT-4o model for agent processing

## Future Improvements

Potential enhancements for the agent system:

1. Implement image generation for the Red Hat's visual keywords
2. Add advanced filtering and ranking for the Blue Hat's value gatekeeping
3. Implement agent feedback loops where insights from one agent inform the others
4. Add user feedback mechanisms to improve agent outputs over time
5. Implement agent memory to track discussion evolution across meetings----- End output of backend/agents/README.md -----

cat backend/agents/implementation_overview.md
----- Begin output of backend/agents/implementation_overview.md -----
# Six Thinking Hats Agent System - Implementation Overview

## What We've Implemented

We've successfully implemented a comprehensive agent system based on Edward de Bono's Six Thinking Hats methodology, organized in a dedicated `agents` folder for better maintainability and extensibility. The system provides rich, multi-perspective insights from meeting transcriptions.

## Implementation Structure

```
agents/
 __init__.py           # Package initialization
 hat_agents.py         # Six Thinking Hats agent configurations
 processor.py          # Agent processing logic
 test_agents.py        # Testing functionality 
 README.md             # Documentation
 implementation_overview.md  # This file
```

## Key Components

1. **Agent Definitions** (`hat_agents.py`):
   - Implemented all six thinking hat agents as per the specification
   - Each agent has a specific role, instructions in Swedish, and uses the OpenAI GPT-4o model
   - Functions to create and configure each agent type
   - Utility to create all agents at once with context from meeting agenda and previous meetings

2. **Agent Processor** (`processor.py`):
   - Handles the processing of transcripts through all agents
   - Manages the workflow where the Blue Hat processes outputs from other hats
   - Handles database interactions to save agent outputs
   - Implements context gathering from meeting information

3. **Database Integration** (`database.py` updates):
   - Added functions to save and retrieve agent outputs
   - Enhanced existing functions with better error handling and session management

4. **Transcription Pipeline Integration** (`audio_transcribe.py` updates):
   - Added background thread for periodic agent processing
   - Integrated agent processing with the transcription pipeline
   - Added proper resource management and cleanup

5. **User Interface** (`streamlit_app.py` updates):
   - Created a tabbed interface to display outputs from each agent
   - Added agent descriptions and visual organization
   - Improved UI with expandable sections and better formatting

6. **Testing** (`test_agents.py`):
   - Created test functions for the hat agents
   - Implemented a test for the agent processor
   - Added documentation and example usage

## System Flow

1. Audio is captured and transcribed (existing functionality)
2. The transcript is saved to the database (existing functionality)
3. The `AgentProcessor` periodically processes recent transcriptions through the six thinking hat agents
4. First, the transcript is processed by the White, Red, Black, Yellow, and Green Hats
5. Then, these outputs are processed by the Blue Hat, which evaluates and selects valuable insights
6. All agent outputs are saved to the database
7. The Streamlit interface displays the latest outputs from each agent in a tabbed format

## Technical Details

- **Background Processing**: Agent processing runs in a background thread to avoid blocking the main transcription pipeline
- **Graceful Shutdown**: Proper cleanup of threads and resources when the system stops
- **Error Handling**: Comprehensive error handling and logging throughout the agent system
- **Modular Design**: Each component is designed to be independently testable and maintainable
- **Documentation**: Thorough documentation in code comments and README files

## Future Extensions

The modular design of the agent system makes it easy to extend with additional capabilities:
- Add image generation for the Red Hat's visual keywords
- Implement advanced filtering for the Blue Hat
- Add agent memory to track discussion evolution across meetings
- Integrate with other AI services for enhanced capabilities

## Using the System

The agent system integrates seamlessly with the existing A-Trans system. To use it:
1. Start a meeting in the Streamlit interface
2. As the meeting progresses and audio is transcribed, agents will automatically process the transcript
3. View agent insights in the "Thinking Hats Insights" section of the interface
4. Each hat's perspective is available in its own tab----- End output of backend/agents/implementation_overview.md -----

cat backend/database.py
----- Begin output of backend/database.py -----
from sqlalchemy import create_engine, Column, Integer, Text, DateTime, ForeignKey
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import relationship, sessionmaker
from datetime import datetime

Base = declarative_base()

class Meeting(Base):
    __tablename__ = 'meetings'
    id = Column(Integer, primary_key=True)
    start_time = Column(DateTime, nullable=False)
    end_time = Column(DateTime, nullable=True)
    title = Column(Text, nullable=False)
    agenda = Column(Text, nullable=True)
    transcripts = relationship('Transcript', backref='meeting')
    outputs = relationship('AgentOutput', backref='meeting')

class MeetingRelation(Base):
    __tablename__ = 'meeting_relations'
    id = Column(Integer, primary_key=True)
    meeting_id = Column(Integer, ForeignKey('meetings.id'), nullable=False)
    previous_meeting_id = Column(Integer, ForeignKey('meetings.id'), nullable=False)

class Transcript(Base):
    __tablename__ = 'transcripts'
    id = Column(Integer, primary_key=True)
    meeting_id = Column(Integer, ForeignKey('meetings.id'), nullable=False)
    timestamp = Column(DateTime, nullable=False)
    text = Column(Text, nullable=False)

class AgentOutput(Base):
    __tablename__ = 'agents_output'
    id = Column(Integer, primary_key=True)
    meeting_id = Column(Integer, ForeignKey('meetings.id'), nullable=False)
    agent_id = Column(Integer, nullable=False)
    agent_name = Column(Text, nullable=False)
    output_text = Column(Text, nullable=False)
    timestamp = Column(DateTime, nullable=False)

engine = create_engine('sqlite:///trans_agents.db')
Base.metadata.create_all(engine)

Session = sessionmaker(bind=engine)

def save_transcript_to_db(meeting_id, text):
    """Saves the transcript to the SQLite database."""
    try:
        session = Session()

        # Create a new transcript object
        transcript = Transcript(meeting_id=meeting_id, timestamp=datetime.now(), text=text)

        # Add the transcript to the session and commit the changes
        session.add(transcript)
        session.commit()

        print(f"Transcript saved to database for meeting ID: {meeting_id}")

    except Exception as e:
        print(f"Error saving transcript to database: {e}")
    finally:
        session.close()

def save_agent_output_to_db(meeting_id, agent_id, agent_name, output_text):
    """Saves the agent output to the SQLite database."""
    try:
        session = Session()

        # Create a new agent output object
        agent_output = AgentOutput(
            meeting_id=meeting_id,
            agent_id=agent_id,
            agent_name=agent_name,
            output_text=output_text,
            timestamp=datetime.now()
        )

        # Add the agent output to the session and commit the changes
        session.add(agent_output)
        session.commit()

        print(f"Agent output saved to database for meeting ID: {meeting_id}, agent: {agent_name}")
        return True

    except Exception as e:
        print(f"Error saving agent output to database: {e}")
        return False
    finally:
        session.close()

def get_agent_outputs(meeting_id, agent_name=None):
    """Retrieves agent outputs for a meeting from the database."""
    try:
        session = Session()
        query = session.query(AgentOutput).filter(AgentOutput.meeting_id == meeting_id)
        
        if agent_name:
            query = query.filter(AgentOutput.agent_name == agent_name)
            
        outputs = query.order_by(AgentOutput.timestamp.desc()).all()
        return outputs
    
    except Exception as e:
        print(f"Error retrieving agent outputs from database: {e}")
        return []
    finally:
        session.close()----- End output of backend/database.py -----

cat backend/constants.py
----- Begin output of backend/constants.py -----
# constants.py
# Model settings
MODEL_NAME = "KBLab/kb-whisper-small"
# Models to chose from:
# "KBLab/kb-whisper-tiny"
# "KBLab/kb-whisper-base"
# "KBLab/kb-whisper-small"
# "KBLab/kb-whisper-medium"
# "KBLab/kb-whisper-large"

# Audio processing settings
MIN_CHUNK_DURATION = 4  # Minimum chunk size in seconds
SILENCE_THRESHOLD = 0.01  # Amplitude threshold for silence
SILENCE_DURATION = 0.2  # Seconds of silence to consider a break
SAMPLE_RATE = 16000  # Sample rate for audio recording, matches Whisper requirement

# Default device
DEFAULT_SYSTEM_DEVICE = 1----- End output of backend/constants.py -----

cat backend/api.py
----- Begin output of backend/api.py -----
import uvicorn
import numpy as np
import base64
from dotenv import load_dotenv
load_dotenv()
from fastapi import FastAPI, Body, HTTPException
from fastapi.middleware.cors import CORSMiddleware
from pydantic import BaseModel
from typing import Dict, Optional, List
from audio_transcribe import AudioTranscriber
from constants import SAMPLE_RATE
from database import get_agent_outputs, AgentOutput, Session, Meeting
from datetime import datetime

app = FastAPI()

# Add CORS middleware to allow requests from the React frontend
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # Modify in production to specify your frontend domain
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# Global transcriber instance
transcriber = None

class AudioChunkModel(BaseModel):
    """Model for receiving audio chunks from the frontend."""
    audio_data: str  # Base64 encoded audio data
    sample_rate: Optional[int] = SAMPLE_RATE

@app.post("/api/start_session/{meeting_id}")
async def start_session(meeting_id: int):
    """Initialize a new transcription session."""
    global transcriber
    try:
        transcriber = AudioTranscriber()
        transcriber.set_meeting_id(meeting_id)
        return {"message": f"Transcription session started for meeting ID: {meeting_id}"}
    except Exception as e:
        raise HTTPException(status_code=500, detail=f"Failed to start session: {str(e)}")

@app.post("/api/transcribe/{meeting_id}")
async def transcribe_audio(meeting_id: int, data: AudioChunkModel):
    """Receive audio chunk and transcribe it."""
    global transcriber
    if not transcriber:
        # Initialize transcriber if not already done
        transcriber = AudioTranscriber()
        transcriber.set_meeting_id(meeting_id)
    
    try:
        # Decode the base64 audio data
        audio_bytes = base64.b64decode(data.audio_data)
        audio_array = np.frombuffer(audio_bytes, dtype=np.float32)
        
        # Transcribe the audio
        result = transcriber.transcribe_audio(audio_array, data.sample_rate)
        
        return {
            "transcription": result,
            "message": "Audio chunk processed successfully"
        }
    except Exception as e:
        raise HTTPException(status_code=500, detail=f"Transcription error: {str(e)}")

@app.post("/api/end_session")
async def end_session():
    """End the current transcription session."""
    global transcriber
    if transcriber:
        transcriber.stop()
        transcriber = None
        return {"message": "Transcription session ended"}
    else:
        return {"message": "No active transcription session"}

class MeetingModel(BaseModel):
    """Model for meeting data."""
    title: str
    agenda: Optional[str] = None

class AgentOutputModel(BaseModel):
    """Model for agent output data."""
    id: int
    agent_id: int
    agent_name: str
    output_text: str
    timestamp: str

@app.get("/api/meetings")
async def list_meetings():
    """Get a list of all meetings."""
    try:
        session = Session()
        meetings = session.query(Meeting).order_by(Meeting.start_time.desc()).all()
        
        # Convert SQLAlchemy objects to dictionaries
        result = []
        for meeting in meetings:
            result.append({
                "id": meeting.id,
                "title": meeting.title,
                "agenda": meeting.agenda,
                "start_time": meeting.start_time.isoformat(),
                "end_time": meeting.end_time.isoformat() if meeting.end_time else None
            })
        
        return {"meetings": result}
    except Exception as e:
        raise HTTPException(status_code=500, detail=f"Failed to fetch meetings: {str(e)}")
    finally:
        session.close()

@app.post("/api/meetings")
async def create_meeting(meeting: MeetingModel):
    """Create a new meeting."""
    try:
        session = Session()
        
        # Create a new meeting record
        new_meeting = Meeting(
            title=meeting.title,
            agenda=meeting.agenda,
            start_time=datetime.now()
        )
        
        session.add(new_meeting)
        session.commit()
        
        meeting_id = new_meeting.id
        session.close()
        
        return {"message": "Meeting created successfully", "meeting_id": meeting_id}
    except Exception as e:
        raise HTTPException(status_code=500, detail=f"Failed to create meeting: {str(e)}")

@app.get("/api/agent_outputs/{meeting_id}")
async def get_meeting_agent_outputs(meeting_id: int):
    """Get all agent outputs for a specific meeting."""
    try:
        # Fetch agent outputs from the database
        outputs = get_agent_outputs(meeting_id)
        
        # Convert SQLAlchemy objects to dictionaries
        result = []
        for output in outputs:
            result.append({
                "id": output.id,
                "agent_id": output.agent_id,
                "agent_name": output.agent_name,
                "output_text": output.output_text,
                "timestamp": output.timestamp.isoformat()
            })
        
        return {"agent_outputs": result}
    except Exception as e:
        raise HTTPException(status_code=500, detail=f"Failed to fetch agent outputs: {str(e)}")

if __name__ == "__main__":
    # Start the FastAPI server
    uvicorn.run(app, host="0.0.0.0", port=8000)----- End output of backend/api.py -----

cat backend/pyproject.toml
----- Begin output of backend/pyproject.toml -----
[project]
name = "a-trans"
version = "0.1.0"
description = "A transcription system with AI agents analysis using the Six Thinking Hats methodology"
readme = "README.md"
requires-python = ">=3.11.9"
dependencies = [
    "fastapi>=0.115.11",
    "numpy>=2.2.4",
    "sounddevice>=0.5.1",
    "sqlalchemy>=2.0.39",
    "streamlit>=1.43.2",
    "torch>=2.6.0",
    "transformers>=4.49.0",
    "uvicorn>=0.34.0",
    "agno>=0.1.0",
    "openai>=1.68.2",
    "python-dotenv>=1.0.1",
]
----- End output of backend/pyproject.toml -----

cat backend/.env
----- Begin output of backend/.env -----
OPENAI_API_KEY=place holder for value
----- End output of backend/.env -----

cat backend/audio_transcribe.py
----- Begin output of backend/audio_transcribe.py -----
import torch
import numpy as np
import threading
import time
from transformers import pipeline
from constants import MODEL_NAME, SAMPLE_RATE

class AudioTranscriber:
    def __init__(self, model_name=MODEL_NAME,
                 device="cuda:0" if torch.cuda.is_available() else "cpu"):
        self.device = device
        self.model_name = model_name
        self.meeting_id = None  # Store meeting_id
        self.transcriber = pipeline("automatic-speech-recognition",
                                    model=self.model_name,
                                    chunk_length_s=30,
                                    device=self.device)
        self.agent_processor = None
        self.agent_processing_thread = None
        self.agent_processing_active = False
        self.agent_processing_interval = 60  # 1 minutes

    def set_meeting_id(self, meeting_id):
        """Set the meeting ID for transcription."""
        self.meeting_id = meeting_id
        # Initialize agent processor when meeting ID is set
        self._initialize_agent_processor()
        
    def _initialize_agent_processor(self):
        """Initialize the agent processor and start the processing thread."""
        if self.meeting_id is None:
            print("Cannot initialize agent processor: No meeting ID set.")
            return
            
        try:
            # Import here to avoid circular import
            from agents.processor import AgentProcessor
            self.agent_processor = AgentProcessor(self.meeting_id)
            
            # Start agent processing thread if not already running
            if not self.agent_processing_active:
                self.agent_processing_active = True
                self.agent_processing_thread = threading.Thread(
                    target=self._agent_processing_loop,
                    daemon=True
                )
                self.agent_processing_thread.start()
                print(f"Agent processing started for meeting ID: {self.meeting_id}")
        except Exception as e:
            print(f"Error initializing agent processor: {e}")

    def _agent_processing_loop(self):
        """Background thread that periodically processes transcripts through agents."""
        while self.agent_processing_active:
            try:
                # Process the latest transcript
                from agents.processor import process_latest_transcript
                print("Processing latest transcript through agents...")
                outputs = process_latest_transcript(self.meeting_id)
                
                if outputs:
                    print(f"Successfully processed transcript through {len(outputs)} agents.")
                else:
                    print("No outputs generated from agents.")
                    
            except Exception as e:
                print(f"Error in agent processing loop: {e}")
                
            # Sleep for the specified interval
            time.sleep(self.agent_processing_interval)

    def transcribe_audio(self, audio_data, sample_rate=SAMPLE_RATE):
        """Transcribes the given audio data using the configured model."""
        try:
            print("Transcribing audio chunk...")
            # Ensure audio_data is a numpy array
            if not isinstance(audio_data, np.ndarray):
                audio_data = np.array(audio_data)
                
            # Handle different audio shapes (from frontend or system recorder)
            if len(audio_data.shape) == 2:
                if audio_data.shape[1] > 1:
                    audio_data = audio_data.mean(axis=1)
                else:
                    audio_data = audio_data[:, 0]
            elif len(audio_data.shape) > 2:
                raise ValueError("Audio data has more than 2 dimensions")

            # Ensure correct data type
            if audio_data.dtype != np.float32:
                audio_data = audio_data.astype(np.float32)

            print(f"Audio data shape: {audio_data.shape}, dtype: {audio_data.dtype}")

            audio_input = {'array': audio_data, 'sampling_rate': sample_rate}
            transcription = self.transcriber(audio_input,
                                            chunk_length_s=30,
                                            batch_size=16,
                                            return_timestamps=False)
            print("Transcription complete.")
            print(f"Transcription: {transcription['text']}")
            if self.meeting_id is not None:
                save_transcript_to_db(self.meeting_id, transcription['text'])
                
                # Ensure agent processor is initialized
                if self.agent_processor is None:
                    self._initialize_agent_processor()
            else:
                print("Warning: No meeting_id set, transcription not saved.")
            return transcription['text']
        except Exception as e:
            print(f"Error during transcription: {e}")
            return None
            
    def stop(self):
        """Stop the agent processing thread."""
        self.agent_processing_active = False
        if self.agent_processing_thread and self.agent_processing_thread.is_alive():
            self.agent_processing_thread.join(timeout=2.0)
            print("Agent processing stopped.")

from database import save_transcript_to_db

if __name__ == '__main__':
    print("AudioTranscribe class initialized. Requires audio data to transcribe.")----- End output of backend/audio_transcribe.py -----

